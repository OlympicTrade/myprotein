;var libs={jquery:'//ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js',jqueryUi:'//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js',libYandexMaps:'//api-maps.yandex.ru/2.1/?lang=ru_RU',libVkOpenApi:'//vk.com/js/api/openapi.js',libFancybox:'lib/fancybox/fansybox.js',libHistory:'lib/history.js',libFancyboxThumb:'lib/fancybox/thumbs.js',libFancyboxMedia:'lib/fancybox/media.js',libFlexSlider:'lib/flexslider.js',libOwlSlider:'lib/owlslider.js',libAptero:'lib/aptero.js',libFormValidator:'lib/form-validator.js',mouseWheeel:'lib/mousewheel.js',libSmoothScroll:'lib/smoothscroll.js',libNiceScroll:'lib/nicescroll.js',libInputMask:'lib/inputmask.js',libCookie:'lib/cookie.js',libCart:'lib/cart.js',libProductsList:'lib/products-list.js',};$.config={};(function(window,document,$,undefined){'use strict';if(!$){return undefined};var defaults={speed:330,loop:true,opacity:'auto',margin:[44,0],gutter:30,infobar:true,buttons:true,slideShow:true,fullScreen:true,thumbs:true,closeBtn:true,smallBtn:'auto',image:{preload:'auto',protect:false},ajax:{settings:{data:{fancybox:true}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',preload:true,scrolling:'no',css:{}},baseClass:'',slideClass:'',baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-controls"><div class="fancybox-infobar"><button data-fancybox-previous class="fancybox-button fancybox-button--left" title="Previous"></button><div class="fancybox-infobar__body"><span class="js-fancybox-index"></span>&nbsp;/&nbsp;<span class="js-fancybox-count"></span></div><button data-fancybox-next class="fancybox-button fancybox-button--right" title="Next"></button></div><div class="fancybox-buttons"><button data-fancybox-close class="fancybox-button fancybox-button--close" title="Close (Esc)"></button></div></div><div class="fancybox-slider-wrap"><div class="fancybox-slider"></div></div><div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>The requested content cannot be loaded. <br /> Please try again later.<p></div>',closeTpl:'<button data-fancybox-close class="fancybox-close-small"></button>',parentEl:'body',touch:true,keyboard:true,focus:true,closeClickOutside:true,beforeLoad:$.noop,afterLoad:$.noop,beforeMove:$.noop,afterMove:$.noop,onComplete:$.noop,onInit:$.noop,beforeClose:$.noop,afterClose:$.noop,onActivate:$.noop,onDeactivate:$.noop};var $W=$(window),$D=$(document),called=0,isQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof $},requestAFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60)}})(),isElementInViewport=function(el){var rect;if(typeof $==='function'&&el instanceof $){el=el[0]};rect=el.getBoundingClientRect();return rect.bottom>0&&rect.right>0&&rect.left<(window.innerWidth||document.documentElement.clientWidth)&&rect.top<(window.innerHeight||document.documentElement.clientHeight)},FancyBox=function(content,opts,index){var self=this;self.opts=$.extend(true,{index:index},defaults,opts||{});self.id=self.opts.id||++called;self.group=[];self.currIndex=parseInt(self.opts.index,10)||0;self.prevIndex=null;self.prevPos=null;self.currPos=0;self.firstRun=null;self.createGroup(content);if(!self.group.length){return};self.$lastFocus=$(document.activeElement).blur();self.slides={};self.init(content)};$.extend(FancyBox.prototype,{init:function(){var self=this,galleryHasHtml=false,testWidth,$container;self.scrollTop=$D.scrollTop();self.scrollLeft=$D.scrollLeft();if(!$.fancybox.getInstance()){testWidth=$('body').width();$('html').addClass('fancybox-enabled');if($.fancybox.isTouch){$.each(self.group,function(key,item){if(item.type!=='image'&&item.type!=='iframe'){galleryHasHtml=true;return false}});if(galleryHasHtml){$('body').css({position:'fixed',width:testWidth,top:self.scrollTop*-1})}}else{testWidth=$('body').width()-testWidth;if(testWidth>1){$('<style id="fancybox-noscroll" type="text/css">').html('.compensate-for-scrollbar, .fancybox-enabled body { margin-right: '+testWidth+'px; }').appendTo('head')}}};$container=$(self.opts.baseTpl).attr('id','fancybox-container-'+self.id).data('FancyBox',self).addClass(self.opts.baseClass).hide().prependTo(self.opts.parentEl);self.$refs={container:$container,bg:$container.find('.fancybox-bg'),controls:$container.find('.fancybox-controls'),buttons:$container.find('.fancybox-buttons'),slider_wrap:$container.find('.fancybox-slider-wrap'),slider:$container.find('.fancybox-slider'),caption:$container.find('.fancybox-caption')};self.trigger('onInit');self.activate();if(self.current){return};self.jumpTo(self.currIndex)},createGroup:function(content){var self=this,items=$.makeArray(content);$.each(items,function(i,item){var obj={},opts={},data=[],$item,type,src,srcParts;if($.isPlainObject(item)){obj=item;opts=item.opts||{}}else if($.type(item)==='object'&&$(item).length){$item=$(item);data=$item.data();opts='options' in data?data.options:{};opts=$.type(opts)==='object'?opts:{};obj.type='type' in data?data.type:opts.type;obj.src='src' in data?data.src:(opts.src||$item.attr('href'));opts.width='width' in data?data.width:opts.width;opts.height='height' in data?data.height:opts.height;opts.thumb='thumb' in data?data.thumb:opts.thumb;opts.selector='selector' in data?data.selector:opts.selector;if('srcset' in data){opts.image={srcset:data.srcset}};opts.$orig=$item}else{obj={type:'html',content:item+''}};obj.opts=$.extend(true,{},self.opts,opts);type=obj.type;src=obj.src||'';if(!type){if(obj.content){type='html'}else if(src.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)){type='image'}else if(src.match(/\.(pdf)((\?|#).*)?$/i)){type='pdf'}else if(src.charAt(0)==='#'){type='inline'};obj.type=type};obj.index=self.group.length;if(obj.opts.$orig&&!obj.opts.$orig.length){delete obj.opts.$orig};if(!obj.opts.$thumb&&obj.opts.$orig){obj.opts.$thumb=obj.opts.$orig.find('img:first')};if(obj.opts.$thumb&&!obj.opts.$thumb.length){delete obj.opts.$thumb};if($.type(obj.opts.caption)==='function'){obj.opts.caption=obj.opts.caption.apply(item,[self,obj])}else if('caption' in data){obj.opts.caption=data.caption}else if(opts.$orig){obj.opts.caption=$item.attr('title')};obj.opts.caption=obj.opts.caption===undefined?'':obj.opts.caption+'';if(type==='ajax'){srcParts=src.split(/\s+/,2);if(srcParts.length>1){obj.src=srcParts.shift();obj.opts.selector=srcParts.shift()}};if(obj.opts.smallBtn=='auto'){if($.inArray(type,['html','inline','ajax'])>-1){obj.opts.buttons=false;obj.opts.smallBtn=true}else{obj.opts.smallBtn=false}};if(type==='pdf'){obj.type='iframe';obj.opts.closeBtn=true;obj.opts.smallBtn=false;obj.opts.iframe.preload=false};if(obj.opts.modal){$.extend(true,obj.opts,{infobar:0,buttons:0,keyboard:0,slideShow:0,fullScreen:0,closeClickOutside:0})};self.group.push(obj)})},addEvents:function(){var self=this;self.removeEvents();self.$refs.container.on('click.fb-close','[data-fancybox-close]',function(e){e.stopPropagation();e.preventDefault();self.close(e)}).on('click.fb-previous','[data-fancybox-previous]',function(e){e.stopPropagation();e.preventDefault();self.previous()}).on('click.fb-next','[data-fancybox-next]',function(e){e.stopPropagation();e.preventDefault();self.next()});$(window).on('orientationchange.fb resize.fb',function(e){requestAFrame(function(){if(e&&e.originalEvent&&e.originalEvent.type==='resize'){self.update()}else{self.$refs.slider_wrap.hide();requestAFrame(function(){self.$refs.slider_wrap.show();self.update()})}})});$D.on('focusin.fb',function(e){var instance=$.fancybox?$.fancybox.getInstance():null;if(instance&&!$(e.target).hasClass('fancybox-container')&&!$.contains(instance.$refs.container[0],e.target)){e.stopPropagation();instance.focus();$W.scrollTop(self.scrollTop).scrollLeft(self.scrollLeft)}});$D.on('keydown.fb',function(e){var current=self.current,keycode=e.keyCode||e.which;if(!current||!current.opts.keyboard){return};if($(e.target).is('input')||$(e.target).is('textarea')){return};if(keycode===8||keycode===27){e.preventDefault();self.close(e);return};switch(keycode){case 37:case 38:e.preventDefault();self.previous();break;case 39:case 40:e.preventDefault();self.next();break;case 80:case 32:e.preventDefault();if(self.SlideShow){e.preventDefault();self.SlideShow.toggle()};break;case 70:if(self.FullScreen){e.preventDefault();self.FullScreen.toggle()};break;case 71:if(self.Thumbs){e.preventDefault();self.Thumbs.toggle()};break}})},removeEvents:function(){$W.off('scroll.fb resize.fb orientationchange.fb');$D.off('keydown.fb focusin.fb click.fb-close');this.$refs.container.off('click.fb-close click.fb-previous click.fb-next')},previous:function(duration){this.jumpTo(this.currIndex-1,duration)},next:function(duration){this.jumpTo(this.currIndex+1,duration)},jumpTo:function(to,duration){var self=this,firstRun,index,pos,loop;firstRun=self.firstRun=(self.firstRun===null);index=pos=to=parseInt(to,10);loop=self.current?self.current.opts.loop:false;if(self.isAnimating||(index==self.currIndex&&!firstRun)){return};if(self.group.length>1&&loop){index=index%self.group.length;index=index<0?self.group.length+index:index;if(self.group.length==2){pos=to-self.currIndex+self.currPos}else{pos=index-self.currIndex+self.currPos;if(Math.abs(self.currPos-(pos+self.group.length))<Math.abs(self.currPos-pos)){pos=pos+self.group.length}else if(Math.abs(self.currPos-(pos-self.group.length))<Math.abs(self.currPos-pos)){pos=pos-self.group.length}}}else if(!self.group[index]){self.update(false,false,duration);return};if(self.current){self.current.$slide.removeClass('fancybox-slide--current fancybox-slide--complete');self.updateSlide(self.current,true)};self.prevIndex=self.currIndex;self.prevPos=self.currPos;self.currIndex=index;self.currPos=pos;self.current=self.createSlide(pos);if(self.group.length>1){if(self.opts.loop||pos-1>=0){self.createSlide(pos-1)};if(self.opts.loop||pos+1<self.group.length){self.createSlide(pos+1)}};self.current.isMoved=false;self.current.isComplete=false;duration=parseInt(duration===undefined?self.current.opts.speed*1.5:duration,10);self.trigger('beforeMove');self.updateControls();if(firstRun){self.current.$slide.addClass('fancybox-slide--current');self.$refs.container.show();requestAFrame(function(){self.$refs.bg.css('transition-duration',self.current.opts.speed+'ms');self.$refs.container.addClass('fancybox-container--ready')})};self.update(true,false,firstRun?0:duration,function(){self.afterMove()});self.loadSlide(self.current);if(!(firstRun&&self.current.$ghost)){self.preload()}},createSlide:function(pos){var self=this,$slide,index,found;index=pos%self.group.length;index=index<0?self.group.length+index:index;if(!self.slides[pos]&&self.group[index]){if(self.opts.loop&&self.group.length>2){for(var key in self.slides){if(self.slides[key].index===index){found=self.slides[key];found.pos=pos;self.slides[pos]=found;delete self.slides[key];self.updateSlide(found);return found}}};$slide=$('<div class="fancybox-slide"></div>').appendTo(self.$refs.slider);self.slides[pos]=$.extend(true,{},self.group[index],{pos:pos,$slide:$slide,isMoved:false,isLoaded:false})};return self.slides[pos]},zoomInOut:function(type,duration,callback){var self=this,current=self.current,$what=current.$placeholder,opacity=current.opts.opacity,$thumb=current.opts.$thumb,thumbPos=$thumb?$thumb.offset():0,slidePos=current.$slide.offset(),props,start,end;if(!$what||!current.isMoved||!thumbPos||!isElementInViewport($thumb)){return false};if(type==='In'&&!self.firstRun){return false};$.fancybox.stop($what);self.isAnimating=true;props={top:thumbPos.top-slidePos.top+parseFloat($thumb.css('border-top-width')||0),left:thumbPos.left-slidePos.left+parseFloat($thumb.css('border-left-width')||0),width:$thumb.width(),height:$thumb.height(),scaleX:1,scaleY:1};if(opacity=='auto'){opacity=Math.abs(current.width/current.height-props.width/props.height)>0.1};if(type==='In'){start=props;end=self.getFitPos(current);end.scaleX=end.width/start.width;end.scaleY=end.height/start.height;if(opacity){start.opacity=0.1;end.opacity=1}}else{start=$.fancybox.getTranslate($what);end=props;if(current.$ghost){current.$ghost.show();if(current.$image){current.$image.remove()}};start.scaleX=start.width/end.width;start.scaleY=start.height/end.height;start.width=end.width;start.height=end.height;if(opacity){end.opacity=0}};self.updateCursor(end.width,end.height);delete end.width;delete end.height;$.fancybox.setTranslate($what,start);$what.show();self.trigger('beforeZoom'+type);$what.css('transition','all '+duration+'ms');$.fancybox.setTranslate($what,end);setTimeout(function(){var reset;$what.css('transition','none');reset=$.fancybox.getTranslate($what);reset.scaleX=1;reset.scaleY=1;$.fancybox.setTranslate($what,reset);self.trigger('afterZoom'+type);callback.apply(self);self.isAnimating=false},duration);return true},canPan:function(){var self=this,current=self.current,$what=current.$placeholder,rez=false;if($what){rez=self.getFitPos(current);rez=Math.abs($what.width()-rez.width)>1||Math.abs($what.height()-rez.height)>1};return rez},isScaledDown:function(){var self=this,current=self.current,$what=current.$placeholder,rez=false;if($what){rez=$.fancybox.getTranslate($what);rez=rez.width<current.width||rez.height<current.height};return rez},scaleToActual:function(x,y,duration){var self=this,current=self.current,$what=current.$placeholder,imgPos,posX,posY,scaleX,scaleY,canvasWidth=parseInt(current.$slide.width(),10),canvasHeight=parseInt(current.$slide.height(),10),newImgWidth=current.width,newImgHeight=current.height;if(!$what){return};self.isAnimating=true;x=x===undefined?canvasWidth*0.5:x;y=y===undefined?canvasHeight*0.5:y;imgPos=$.fancybox.getTranslate($what);scaleX=newImgWidth/imgPos.width;scaleY=newImgHeight/imgPos.height;posX=(canvasWidth*0.5-newImgWidth*0.5);posY=(canvasHeight*0.5-newImgHeight*0.5);if(newImgWidth>canvasWidth){posX=imgPos.left*scaleX-((x*scaleX)-x);if(posX>0){posX=0};if(posX<canvasWidth-newImgWidth){posX=canvasWidth-newImgWidth}};if(newImgHeight>canvasHeight){posY=imgPos.top*scaleY-((y*scaleY)-y);if(posY>0){posY=0};if(posY<canvasHeight-newImgHeight){posY=canvasHeight-newImgHeight}};self.updateCursor(newImgWidth,newImgHeight);$.fancybox.animate($what,null,{top:posY,left:posX,scaleX:scaleX,scaleY:scaleY},duration||current.opts.speed,function(){self.isAnimating=false})},scaleToFit:function(duration){var self=this,current=self.current,$what=current.$placeholder,end;if(!$what){return};self.isAnimating=true;end=self.getFitPos(current);self.updateCursor(end.width,end.height);$.fancybox.animate($what,null,{top:end.top,left:end.left,scaleX:end.width/$what.width(),scaleY:end.height/$what.height()},duration||current.opts.speed,function(){self.isAnimating=false})},getFitPos:function(slide){var $what=slide.$placeholder||slide.$content,imgWidth=slide.width,imgHeight=slide.height,margin=slide.opts.margin,canvasWidth,canvasHeight,minRatio,top,left,width,height;if(!$what||!$what.length||(!imgWidth&&!imgHeight)){return false};if($.type(margin)==='number'){margin=[margin,margin]};if(margin.length==2){margin=[margin[0],margin[1],margin[0],margin[1]]};if($W.width()<800){margin=[0,0,0,0]};canvasWidth=parseInt(slide.$slide.width(),10)-(margin[1]+margin[3]);canvasHeight=parseInt(slide.$slide.height(),10)-(margin[0]+margin[2]);minRatio=Math.min(1,canvasWidth/imgWidth,canvasHeight/imgHeight);width=Math.floor(minRatio*imgWidth);height=Math.floor(minRatio*imgHeight);top=Math.floor((canvasHeight-height)*0.5)+margin[0];left=Math.floor((canvasWidth-width)*0.5)+margin[3];return{top:top,left:left,width:width,height:height}},update:function(andSlides,andContent,duration,callback){var self=this,leftValue;if(self.isAnimating===true||!self.current){return};leftValue=(self.current.pos*Math.floor(self.current.$slide.width())*-1)-(self.current.pos*self.current.opts.gutter);duration=parseInt(duration,10)||0;$.fancybox.stop(self.$refs.slider);if(andSlides===false){self.updateSlide(self.current,andContent)}else{$.each(self.slides,function(key,slide){self.updateSlide(slide,andContent)})};if(duration){$.fancybox.animate(self.$refs.slider,null,{top:0,left:leftValue},duration,function(){self.current.isMoved=true;if($.type(callback)==='function'){callback.apply(self)}})}else{$.fancybox.setTranslate(self.$refs.slider,{top:0,left:leftValue});self.current.isMoved=true;if($.type(callback)==='function'){callback.apply(self)}}},updateSlide:function(slide,andContent){var self=this,$what=slide.$placeholder,leftPos;slide=slide||self.current;if(!slide||self.isClosing){return};leftPos=(slide.pos*Math.floor(slide.$slide.width()))+(slide.pos*slide.opts.gutter);if(leftPos!==slide.leftPos){$.fancybox.setTranslate(slide.$slide,{top:0,left:leftPos});slide.leftPos=leftPos};if(andContent!==false&&$what){$.fancybox.setTranslate($what,self.getFitPos(slide));if(slide.pos===self.currPos){self.updateCursor()}};slide.$slide.trigger('refresh');self.trigger('onUpdate',slide)},updateCursor:function(nextWidth,nextHeight){var self=this,canScale,$container=self.$refs.container.removeClass('fancybox-controls--canzoomIn fancybox-controls--canzoomOut fancybox-controls--canGrab');if(self.isClosing||!self.opts.touch){return};if(nextWidth!==undefined&&nextHeight!==undefined){canScale=nextWidth<self.current.width&&nextHeight<self.current.height}else{canScale=self.isScaledDown()};if(canScale){$container.addClass('fancybox-controls--canzoomIn')}else if(self.group.length<2){$container.addClass('fancybox-controls--canzoomOut')}else{$container.addClass('fancybox-controls--canGrab')}},loadSlide:function(slide){var self=this,type,$slide,ajaxLoad;if(!slide||slide.isLoaded||slide.isLoading){return};slide.isLoading=true;self.trigger('beforeLoad',slide);type=slide.type;$slide=slide.$slide;$slide.off('refresh').trigger('onReset').addClass('fancybox-slide--'+(type||'unknown')).addClass(slide.opts.slideClass);switch(type){case'image':self.setImage(slide);break;case'iframe':self.setIframe(slide);break;case'html':self.setContent(slide,slide.content);break;case'inline':if($(slide.src).length){self.setContent(slide,$(slide.src))}else{self.setError(slide)};break;case'ajax':self.showLoading(slide);ajaxLoad=$.ajax($.extend({},slide.opts.ajax.settings,{url:slide.src,success:function(data,textStatus){if(textStatus==='success'){self.setContent(slide,data)}},error:function(jqXHR,textStatus){if(jqXHR&&textStatus!=='abort'){self.setError(slide)}}}));$slide.one('onReset',function(){ajaxLoad.abort()});break;default:self.setError(slide);break};return true},setImage:function(slide){var self=this,srcset=slide.opts.image.srcset,found,temp,pxRatio,windowWidth;if(slide.isLoaded&&!slide.hasError){self.afterLoad(slide);return};if(srcset){pxRatio=window.devicePixelRatio||1;windowWidth=window.innerWidth*pxRatio;temp=srcset.split(',').map(function(el){var ret={};el.trim().split(/\s+/).forEach(function(el,i){var value=parseInt(el.substring(0,el.length-1),10);if(i===0){return(ret.url=el)};if(value){ret.value=value;ret.postfix=el[el.length-1]}});return ret});temp.sort(function(a,b){return a.value-b.value});for(var j=0;j<temp.length;j++){var el=temp[j];if((el.postfix==='w'&&el.value>=windowWidth)||(el.postfix==='x'&&el.value>=pxRatio)){found=el;break}};if(!found&&temp.length){found=temp[temp.length-1]};if(found){slide.src=found.url;if(slide.width&&slide.height&&found.postfix=='w'){slide.height=(slide.width/slide.height)*found.value;slide.width=found.value}}};slide.$placeholder=$('<div class="fancybox-placeholder"></div>').hide().appendTo(slide.$slide);if(slide.opts.preload!==false&&slide.opts.width&&slide.opts.height&&(slide.opts.thumb||slide.opts.$thumb)){slide.width=slide.opts.width;slide.height=slide.opts.height;slide.$ghost=$('<img />').one('load error',function(){if(self.isClosing){return};$('<img/>')[0].src=slide.src;self.revealImage(slide,function(){self.setBigImage(slide);if(self.firstRun&&slide.index===self.currIndex){self.preload()}})}).addClass('fancybox-image').appendTo(slide.$placeholder).attr('src',slide.opts.thumb||slide.opts.$thumb.attr('src'))}else{self.setBigImage(slide)}},setBigImage:function(slide){var self=this,$img=$('<img />');slide.$image=$img.one('error',function(){self.setError(slide)}).one('load',function(){clearTimeout(slide.timouts);slide.timouts=null;if(self.isClosing){return};slide.width=this.naturalWidth;slide.height=this.naturalHeight;if(slide.opts.image.srcset){$img.attr('sizes','100vw').attr('srcset',slide.opts.image.srcset)};self.afterLoad(slide);if(slide.$ghost){slide.timouts=setTimeout(function(){slide.$ghost.hide()},350)}}).addClass('fancybox-image').attr('src',slide.src).appendTo(slide.$placeholder);if($img[0].complete){$img.trigger('load')}else if($img[0].error){$img.trigger('error')}else{slide.timouts=setTimeout(function(){if(!$img[0].complete&&!slide.hasError){self.showLoading(slide)}},150)};if(slide.opts.image.protect){$('<div class="fancybox-spaceball"></div>').appendTo(slide.$placeholder).on('contextmenu.fb',function(e){if(e.button==2){e.preventDefault()};return true})}},revealImage:function(slide,callback){var self=this;callback=callback||$.noop;if(slide.type!=='image'||slide.hasError||slide.isRevealed===true){callback.apply(self);return};slide.isRevealed=true;if(!(slide.pos===self.currPos&&self.zoomInOut('In',slide.opts.speed,callback))){if(slide.$ghost&&!slide.isLoaded){self.updateSlide(slide,true)};if(slide.pos===self.currPos){$.fancybox.animate(slide.$placeholder,{opacity:0},{opacity:1},300,callback)}else{slide.$placeholder.show()};callback.apply(self)}},setIframe:function(slide){var self=this,opts=slide.opts.iframe,$slide=slide.$slide,$iframe;slide.$content=$('<div class="fancybox-content"></div>').css(opts.css).appendTo($slide);$iframe=$(opts.tpl.replace(/\{rnd\}/g,new Date().getTime())).attr('scrolling',$.fancybox.isTouch?'auto':opts.scrolling).appendTo(slide.$content);if(opts.preload){slide.$content.addClass('fancybox-tmp');self.showLoading(slide);$iframe.on('load.fb error.fb',function(e){this.isReady=1;slide.$slide.trigger('refresh');self.afterLoad(slide)});$slide.on('refresh.fb',function(){var $wrap=slide.$content,$contents,$body,scrollWidth,frameWidth,frameHeight;if($iframe[0].isReady!==1){return};try{$contents=$iframe.contents();$body=$contents.find('body')}catch(catch$scope$var708587005){};if($body&&$body.length&&!(opts.css.width!==undefined&&opts.css.height!==undefined)){scrollWidth=$iframe[0].contentWindow.document.documentElement.scrollWidth;frameWidth=Math.ceil($body.outerWidth(true)+($wrap.width()-scrollWidth));frameHeight=Math.ceil($body.outerHeight(true));$wrap.css({'width':opts.css.width===undefined?frameWidth+($wrap.outerWidth()-$wrap.innerWidth()):opts.css.width,'height':opts.css.height===undefined?frameHeight+($wrap.outerHeight()-$wrap.innerHeight()):opts.css.height})};$wrap.removeClass('fancybox-tmp')})}else{this.afterLoad(slide)};$iframe.attr('src',slide.src);if(slide.opts.smallBtn){slide.$content.prepend(slide.opts.closeTpl)};$slide.one('onReset',function(){try{$(this).find('iframe').hide().attr('src','//about:blank')}catch(catch$scope$var708587005){};$(this).empty();slide.isLoaded=false})},setContent:function(slide,content){var self=this;if(self.isClosing){return};self.hideLoading(slide);slide.$slide.empty();if(isQuery(content)&&content.parent().length){if(content.data('placeholder')){content.parents('.fancybox-slide').trigger('onReset')};content.data({'placeholder':$('<div></div>').hide().insertAfter(content)}).css('display','inline-block')}else{if($.type(content)==='string'){content=$('<div>').append(content).contents();if(content[0].nodeType===3){content=$('<div>').html(content)}};if(slide.opts.selector){content=$('<div>').html(content).find(slide.opts.selector)}};slide.$slide.one('onReset',function(){var placeholder=isQuery(content)?content.data('placeholder'):0;if(placeholder){content.hide().replaceAll(placeholder);content.data('placeholder',null)};if(!slide.hasError){$(this).empty();slide.isLoaded=false}});slide.$content=$(content).appendTo(slide.$slide);if(slide.opts.smallBtn===true){slide.$content.find('.fancybox-close-small').remove().end().eq(0).append(slide.opts.closeTpl)};this.afterLoad(slide)},setError:function(slide){slide.hasError=true;this.setContent(slide,slide.opts.errorTpl)},showLoading:function(slide){var self=this;slide=slide||self.current;if(slide&&!slide.$spinner){slide.$spinner=$(self.opts.spinnerTpl).appendTo(slide.$slide)}},hideLoading:function(slide){var self=this;slide=slide||self.current;if(slide&&slide.$spinner){slide.$spinner.remove();delete slide.$spinner}},afterMove:function(){var self=this,current=self.current,slides={};if(!current){return};current.$slide.siblings().trigger('onReset');$.each(self.slides,function(key,slide){if(slide.pos>=self.currPos-1&&slide.pos<=self.currPos+1){slides[slide.pos]=slide}else if(slide){slide.$slide.remove()}});self.slides=slides;self.trigger('afterMove');if(current.isLoaded){self.complete()}},afterLoad:function(slide){var self=this;if(self.isClosing){return};slide.isLoading=false;slide.isLoaded=true;self.trigger('afterLoad',slide);self.hideLoading(slide);if(!slide.$ghost){self.updateSlide(slide,true)};if(slide.index===self.currIndex&&slide.isMoved){self.complete()}else if(!slide.$ghost){self.revealImage(slide)}},complete:function(){var self=this,current=self.current;self.revealImage(current,function(){current.isComplete=true;current.$slide.addClass('fancybox-slide--complete');self.updateCursor();self.trigger('onComplete');if(current.opts.focus&&!(current.type==='image'||current.type==='iframe')){self.focus()}})},preload:function(){var self=this,next,prev;if(self.group.length<2){return};next=self.slides[self.currPos+1];prev=self.slides[self.currPos-1];if(next&&next.type==='image'){self.loadSlide(next)};if(prev&&prev.type==='image'){self.loadSlide(prev)}},focus:function(){var current=this.current,$el;$el=current&&current.isComplete?current.$slide.find('button,:input,[tabindex],a:not(".disabled")').filter(':visible:first'):null;if(!$el||!$el.length){$el=this.$refs.container};$el.focus();this.$refs.slider_wrap.scrollLeft(0);if(current){current.$slide.scrollTop(0)}},activate:function(){var self=this;$('.fancybox-container').each(function(){var instance=$(this).data('FancyBox');if(instance&&instance.uid!==self.uid&&!instance.isClosing){instance.trigger('onDeactivate')}});if(self.current){if(self.$refs.container.index()>0){self.$refs.container.prependTo(document.body)};self.updateControls()};self.trigger('onActivate');self.addEvents()},close:function(e){var self=this,current=self.current,duration=current.opts.speed,done=$.proxy(function(){self.cleanUp(e)},this);if(self.isAnimating||self.isClosing){return false};if(self.trigger('beforeClose',e)===false){$.fancybox.stop(self.$refs.slider);requestAFrame(function(){self.update(true,true,150)});return};self.isClosing=true;if(current.timouts){clearTimeout(current.timouts)};if(e!==true){$.fancybox.stop(self.$refs.slider)};self.$refs.container.removeClass('fancybox-container--active').addClass('fancybox-container--closing');current.$slide.removeClass('fancybox-slide--complete').siblings().remove();if(!current.isMoved){current.$slide.css('overflow','visible')};self.removeEvents();self.hideLoading(current);self.hideControls();self.updateCursor();self.$refs.bg.css('transition-duration',duration+'ms');this.$refs.container.removeClass('fancybox-container--ready');if(e===true){setTimeout(done,duration)}else if(!self.zoomInOut('Out',duration,done)){$.fancybox.animate(self.$refs.container,null,{opacity:0},duration,'easeInSine',done)}},cleanUp:function(e){var self=this,instance;self.$refs.slider.children().trigger('onReset');self.$refs.container.empty().remove();self.trigger('afterClose',e);self.current=null;instance=$.fancybox.getInstance();if(instance){instance.activate()}else{$('html').removeClass('fancybox-enabled');$('body').removeAttr('style');$W.scrollTop(self.scrollTop).scrollLeft(self.scrollLeft);$('#fancybox-noscroll').remove()};if(self.$lastFocus){self.$lastFocus.focus()}},trigger:function(name,slide){var args=Array.prototype.slice.call(arguments,1),self=this,obj=slide&&slide.opts?slide:self.current,rez;if(obj){args.unshift(obj)}else{obj=self};args.unshift(self);if($.isFunction(obj.opts[name])){rez=obj.opts[name].apply(obj,args)};if(rez===false){return rez};if(name==='afterClose'){$(document).trigger(name+'.fb',args)}else{self.$refs.container.trigger(name+'.fb',args)}},toggleControls:function(force){if(this.isHiddenControls){this.updateControls(force)}else{this.hideControls()}},hideControls:function(){this.isHiddenControls=true;this.$refs.container.removeClass('fancybox-show-controls');this.$refs.container.removeClass('fancybox-show-caption')},updateControls:function(force){var self=this,$container=self.$refs.container,$caption=self.$refs.caption,current=self.current,index=current.index,opts=current.opts,caption=opts.caption;if(this.isHiddenControls&&force!==true){return};this.isHiddenControls=false;$container.addClass('fancybox-show-controls').toggleClass('fancybox-show-infobar',!!opts.infobar&&self.group.length>1).toggleClass('fancybox-show-buttons',!!opts.buttons).toggleClass('fancybox-is-modal',!!opts.modal);$('.fancybox-button--left',$container).toggleClass('fancybox-button--disabled',(!opts.loop&&index<=0));$('.fancybox-button--right',$container).toggleClass('fancybox-button--disabled',(!opts.loop&&index>=self.group.length-1));$('.fancybox-button--play',$container).toggle(!!(opts.slideShow&&self.group.length>1));$('.fancybox-button--close',$container).toggle(!!opts.closeBtn);$('.js-fancybox-count',$container).html(self.group.length);$('.js-fancybox-index',$container).html(index+1);current.$slide.trigger('refresh');if($caption){$caption.empty()};if(caption&&caption.length){$caption.html(caption);this.$refs.container.addClass('fancybox-show-caption ');self.$caption=$caption}else{this.$refs.container.removeClass('fancybox-show-caption')}}});$.fancybox={version:'{fancybox-version}',defaults:defaults,getInstance:function(command){var instance=$('.fancybox-container:not(".fancybox-container--closing"):first').data('FancyBox'),args=Array.prototype.slice.call(arguments,1);if(instance instanceof FancyBox){if($.type(command)==='string'){instance[command].apply(instance,args)}else if($.type(command)==='function'){command.apply(instance,args)};return instance};return false},open:function(items,opts,index){return new FancyBox(items,opts,index)},close:function(all){var instance=this.getInstance();if(instance){instance.close();if(all===true){this.close()}}},isTouch:document.createTouch!==undefined&&/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),use3d:(function(){var div=document.createElement('div');return window.getComputedStyle(div).getPropertyValue('transform')&&!(document.documentMode&&document.documentMode<=11)}()),getTranslate:function($el){var position,matrix;if(!$el||!$el.length){return false};position=$el.get(0).getBoundingClientRect();matrix=$el.eq(0).css('transform');if(matrix&&matrix.indexOf('matrix')!==-1){matrix=matrix.split('(')[1];matrix=matrix.split(')')[0];matrix=matrix.split(',')}else{matrix=[]};if(matrix.length){if(matrix.length>10){matrix=[matrix[13],matrix[12],matrix[0],matrix[5]]}else{matrix=[matrix[5],matrix[4],matrix[0],matrix[3]]};matrix=matrix.map(parseFloat)}else{matrix=[0,0,1,1]};return{top:matrix[0],left:matrix[1],scaleX:matrix[2],scaleY:matrix[3],opacity:parseFloat($el.css('opacity')),width:position.width,height:position.height}},setTranslate:function($el,props){var str='',css={};if(!$el||!props){return};if(props.left!==undefined||props.top!==undefined){str=(props.left===undefined?$el.position().top:props.left)+'px, '+(props.top===undefined?$el.position().top:props.top)+'px';if(this.use3d){str='translate3d('+str+', 0px)'}else{str='translate('+str+')'}};if(props.scaleX!==undefined&&props.scaleY!==undefined){str=(str.length?str+' ':'')+'scale('+props.scaleX+', '+props.scaleY+')'};if(str.length){css.transform=str};if(props.opacity!==undefined){css.opacity=props.opacity};if(props.width!==undefined){css.width=props.width};if(props.height!==undefined){css.height=props.height};return $el.css(css)},easing:{easeOutCubic:function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInCubic:function(t,b,c,d){return c*(t/=d)*t*t+b},easeOutSine:function(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInSine:function(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b}},stop:function($el){$el.removeData('animateID')},animate:function($el,from,to,duration,easing,done){var self=this,lastTime=null,animTime=0,curr,diff,id,finish=function(){if(to.scaleX!==undefined&&to.scaleY!==undefined&&from&&from.width!==undefined&&from.height!==undefined){to.width=from.width*to.scaleX;to.height=from.height*to.scaleY;to.scaleX=1;to.scaleY=1};self.setTranslate($el,to);done()},frame=function(timestamp){curr=[];diff=0;if(!$el.length||$el.data('animateID')!==id){return};timestamp=timestamp||Date.now();if(lastTime){diff=timestamp-lastTime};lastTime=timestamp;animTime+=diff;if(animTime>=duration){finish();return};for(var prop in to){if(to.hasOwnProperty(prop)&&from[prop]!==undefined){if(from[prop]==to[prop]){curr[prop]=to[prop]}else{curr[prop]=self.easing[easing](animTime,from[prop],to[prop]-from[prop],duration)}}};self.setTranslate($el,curr);requestAFrame(frame)};self.animateID=id=self.animateID===undefined?1:self.animateID+1;$el.data('animateID',id);if(done===undefined&&$.type(easing)=='function'){done=easing;easing=undefined};if(!easing){easing='easeOutCubic'};done=done||$.noop;if(from){this.setTranslate($el,from)}else{from=this.getTranslate($el)};if(duration){$el.show();requestAFrame(frame)}else{finish()}}};function _run(e){var target=e.currentTarget,opts=e.data?e.data.options:{},items=e.data?e.data.items:[],value='',index=0;e.preventDefault();e.stopPropagation();if($(target).attr('data-fancybox')){value=$(target).data('fancybox')};if(value){items=items.length?items.filter('[data-fancybox="'+value+'"]'):$('[data-fancybox='+value+']');index=items.index(target)}else{items=[target]};$.fancybox.open(items,opts,index)};$.fn.fancybox=function(options){this.off('click.fb-start').on('click.fb-start',{items:this,options:options||{}},_run);return this};$(document).on('click.fb-start','[data-fancybox]',_run)}(window,document,window.jQuery));(function(){'use strict';var defaults={mode:'lg-slide',cssEasing:'ease',easing:'linear',speed:600,height:'100%',width:'100%',addClass:'',startClass:'lg-start-zoom',backdropDuration:150,hideBarsDelay:6000,useLeft:false,closable:true,loop:true,escKey:true,keyPress:true,controls:true,slideEndAnimatoin:true,hideControlOnEnd:false,mousewheel:true,getCaptionFromTitleOrAlt:true,appendSubHtmlTo:'.lg-sub-html',subHtmlSelectorRelative:false,preload:1,showAfterLoad:true,selector:'',selectWithin:'',nextHtml:'',prevHtml:'',index:false,iframeMaxWidth:'100%',download:true,counter:true,appendCounterTo:'.lg-toolbar',swipeThreshold:50,enableSwipe:true,enableDrag:true,dynamic:false,dynamicEl:[],galleryId:1};function Plugin(element,options){this.el=element;this.$el=$(element);this.s=$.extend({},defaults,options);if(this.s.dynamic&&this.s.dynamicEl!=='undefined'&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length){throw('When using dynamic mode, you must also define dynamicEl as an Array.');};this.modules={};this.lGalleryOn=false;this.lgBusy=false;this.hideBartimeout=false;this.isTouch=('ontouchstart' in document.documentElement);if(this.s.slideEndAnimatoin){this.s.hideControlOnEnd=false};if(this.s.dynamic){this.$items=this.s.dynamicEl}else{if(this.s.selector==='this'){this.$items=this.$el}else if(this.s.selector!==''){if(this.s.selectWithin){this.$items=$(this.s.selectWithin).find(this.s.selector)}else{this.$items=this.$el.find($(this.s.selector))}}else{this.$items=this.$el.children()}};this.$slide='';this.$outer='';this.init();return this};Plugin.prototype.init=function(){var _this=this;if(_this.s.preload>_this.$items.length){_this.s.preload=_this.$items.length};var _hash=window.location.hash;if(_hash.indexOf('lg='+this.s.galleryId)>0){_this.index=parseInt(_hash.split('&slide=')[1],10);$('body').addClass('lg-from-hash');if(!$('body').hasClass('lg-on')){setTimeout(function(){_this.build(_this.index)});$('body').addClass('lg-on')}};if(_this.s.dynamic){_this.$el.trigger('onBeforeOpen.lg');_this.index=_this.s.index||0;if(!$('body').hasClass('lg-on')){setTimeout(function(){_this.build(_this.index);$('body').addClass('lg-on')})}}else{_this.$items.on('click.lgcustom',function(event){try{event.preventDefault();event.preventDefault()}catch(catch$scope$var708587005){event.returnValue=false};_this.$el.trigger('onBeforeOpen.lg');_this.index=_this.s.index||_this.$items.index(this);if(!$('body').hasClass('lg-on')){_this.build(_this.index);$('body').addClass('lg-on')}})}};Plugin.prototype.build=function(index){var _this=this;_this.structure();$.each($.fn.lightGallery.modules,function(key){_this.modules[key]=new $.fn.lightGallery.modules[key](_this.el)});_this.slide(index,false,false,false);if(_this.s.keyPress){_this.keyPress()};if(_this.$items.length>1){_this.arrow();setTimeout(function(){_this.enableDrag();_this.enableSwipe()},50);if(_this.s.mousewheel){_this.mousewheel()}}else{_this.$slide.on('click.lg',function(){_this.$el.trigger('onSlideClick.lg')})};_this.counter();_this.closeGallery();_this.$el.trigger('onAfterOpen.lg');_this.$outer.on('mousemove.lg click.lg touchstart.lg',function(){_this.$outer.removeClass('lg-hide-items');clearTimeout(_this.hideBartimeout);_this.hideBartimeout=setTimeout(function(){_this.$outer.addClass('lg-hide-items')},_this.s.hideBarsDelay)});_this.$outer.trigger('mousemove.lg')};Plugin.prototype.structure=function(){var list='',controls='',i=0,subHtmlCont='',template,_this=this;$('body').append('<div class="lg-backdrop"></div>');$('.lg-backdrop').css('transition-duration',this.s.backdropDuration+'ms');for(i=0;i<this.$items.length;i++){list+='<div class="lg-item"></div>'};if(this.s.controls&&this.$items.length>1){controls='<div class="lg-actions"><button class="lg-prev lg-icon">'+this.s.prevHtml+'</button><button class="lg-next lg-icon">'+this.s.nextHtml+'</button></div>'};if(this.s.appendSubHtmlTo==='.lg-sub-html'){subHtmlCont='<div class="lg-sub-html"></div>'};template='<div class="lg-outer '+this.s.addClass+' '+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+'; height:'+this.s.height+'"><div class="lg-inner">'+list+'</div><div class="lg-toolbar lg-group"><span class="lg-close lg-icon"></span></div>'+controls+subHtmlCont+'</div></div>';$('body').append(template);this.$outer=$('.lg-outer');this.$slide=this.$outer.find('.lg-item');if(this.s.useLeft){this.$outer.addClass('lg-use-left');this.s.mode='lg-slide'}else{this.$outer.addClass('lg-use-css3')};_this.setTop();$(window).on('resize.lg orientationchange.lg',function(){setTimeout(function(){_this.setTop()},100)});this.$slide.eq(this.index).addClass('lg-current');if(this.doCss()){this.$outer.addClass('lg-css3')}else{this.$outer.addClass('lg-css');this.s.speed=0};this.$outer.addClass(this.s.mode);if(this.s.enableDrag&&this.$items.length>1){this.$outer.addClass('lg-grab')};if(this.s.showAfterLoad){this.$outer.addClass('lg-show-after-load')};if(this.doCss()){var $inner=this.$outer.find('.lg-inner');$inner.css('transition-timing-function',this.s.cssEasing);$inner.css('transition-duration',this.s.speed+'ms')};setTimeout(function(){$('.lg-backdrop').addClass('in')});setTimeout(function(){_this.$outer.addClass('lg-visible')},this.s.backdropDuration);if(this.s.download){this.$outer.find('.lg-toolbar').append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>')};this.prevScrollTop=$(window).scrollTop()};Plugin.prototype.setTop=function(){if(this.s.height!=='100%'){var wH=$(window).height(),top=(wH-parseInt(this.s.height,10))/2,$lGallery=this.$outer.find('.lg');if(wH>=parseInt(this.s.height,10)){$lGallery.css('top',top+'px')}else{$lGallery.css('top','0px')}}};Plugin.prototype.doCss=function(){var support=function(){var transition=['transition','MozTransition','WebkitTransition','OTransition','msTransition','KhtmlTransition'],root=document.documentElement,i=0;for(i=0;i<transition.length;i++){if(transition[i]in root.style){return true}}};if(support()){return true};return false};Plugin.prototype.isVideo=function(src,index){var html;if(this.s.dynamic){html=this.s.dynamicEl[index].html}else{html=this.$items.eq(index).attr('data-html')};if(!src){if(html){return{html5:true}}else{console.error('lightGallery :- data-src is not pvovided on slide item '+(index+1)+'. Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html');return false}};var youtube=src.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),vimeo=src.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),dailymotion=src.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),vk=src.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);if(youtube){return{youtube:youtube}}else if(vimeo){return{vimeo:vimeo}}else if(dailymotion){return{dailymotion:dailymotion}}else if(vk){return{vk:vk}}};Plugin.prototype.counter=function(){if(this.s.counter){$(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+'</span></div>')}};Plugin.prototype.addHtml=function(index){var subHtml=null,subHtmlUrl,$currentEle;if(this.s.dynamic){if(this.s.dynamicEl[index].subHtmlUrl){subHtmlUrl=this.s.dynamicEl[index].subHtmlUrl}else{subHtml=this.s.dynamicEl[index].subHtml}}else{$currentEle=this.$items.eq(index);if($currentEle.attr('data-sub-html-url')){subHtmlUrl=$currentEle.attr('data-sub-html-url')}else{subHtml=$currentEle.attr('data-sub-html');if(this.s.getCaptionFromTitleOrAlt&&!subHtml){subHtml=$currentEle.attr('title')||$currentEle.find('img').first().attr('alt')}}};if(!subHtmlUrl){if(typeof subHtml!=='undefined'&&subHtml!==null){var fL=subHtml.substring(0,1);if(fL==='.'||fL==='#'){if(this.s.subHtmlSelectorRelative&&!this.s.dynamic){subHtml=$currentEle.find(subHtml).html()}else{subHtml=$(subHtml).html()}}}else{subHtml=''}};if(this.s.appendSubHtmlTo==='.lg-sub-html'){if(subHtmlUrl){this.$outer.find(this.s.appendSubHtmlTo).load(subHtmlUrl)}else{this.$outer.find(this.s.appendSubHtmlTo).html(subHtml)}}else{if(subHtmlUrl){this.$slide.eq(index).load(subHtmlUrl)}else{this.$slide.eq(index).append(subHtml)}};if(typeof subHtml!=='undefined'&&subHtml!==null){if(subHtml===''){this.$outer.find(this.s.appendSubHtmlTo).addClass('lg-empty-html')}else{this.$outer.find(this.s.appendSubHtmlTo).removeClass('lg-empty-html')}};this.$el.trigger('onAfterAppendSubHtml.lg',[index])};Plugin.prototype.preload=function(index){var i=1,j=1;for(i=1;i<=this.s.preload;i++){if(i>=this.$items.length-index){break};this.loadContent(index+i,false,0)};for(j=1;j<=this.s.preload;j++){if(index-j<0){break};this.loadContent(index-j,false,0)}};Plugin.prototype.loadContent=function(index,rec,delay){var _this=this,_hasPoster=false,_$img,_src,_poster,_srcset,_sizes,_html,getResponsiveSrc=function(srcItms){var rsWidth=[],rsSrc=[];for(var i=0;i<srcItms.length;i++){var __src=srcItms[i].split(' ');if(__src[0]===''){__src.splice(0,1)};rsSrc.push(__src[0]);rsWidth.push(__src[1])};var wWidth=$(window).width();for(var j=0;j<rsWidth.length;j++){if(parseInt(rsWidth[j],10)>wWidth){_src=rsSrc[j];break}}};if(_this.s.dynamic){if(_this.s.dynamicEl[index].poster){_hasPoster=true;_poster=_this.s.dynamicEl[index].poster};_html=_this.s.dynamicEl[index].html;_src=_this.s.dynamicEl[index].src;if(_this.s.dynamicEl[index].responsive){var srcDyItms=_this.s.dynamicEl[index].responsive.split(',');getResponsiveSrc(srcDyItms)};_srcset=_this.s.dynamicEl[index].srcset;_sizes=_this.s.dynamicEl[index].sizes}else{if(_this.$items.eq(index).attr('data-poster')){_hasPoster=true;_poster=_this.$items.eq(index).attr('data-poster')};_html=_this.$items.eq(index).attr('data-html');_src=_this.$items.eq(index).attr('href')||_this.$items.eq(index).attr('data-src');if(_this.$items.eq(index).attr('data-responsive')){var srcItms=_this.$items.eq(index).attr('data-responsive').split(',');getResponsiveSrc(srcItms)};_srcset=_this.$items.eq(index).attr('data-srcset');_sizes=_this.$items.eq(index).attr('data-sizes')};var iframe=false;if(_this.s.dynamic){if(_this.s.dynamicEl[index].iframe){iframe=true}}else{if(_this.$items.eq(index).attr('data-iframe')==='true'){iframe=true}};var _isVideo=_this.isVideo(_src,index);if(!_this.$slide.eq(index).hasClass('lg-loaded')){if(iframe){_this.$slide.eq(index).prepend('<div class="lg-video-cont lg-has-iframe" style="max-width:'+_this.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+_src+'"  allowfullscreen="true"></iframe></div></div>')}else if(_hasPoster){var videoClass='';if(_isVideo&&_isVideo.youtube){videoClass='lg-has-youtube'}else if(_isVideo&&_isVideo.vimeo){videoClass='lg-has-vimeo'}else{videoClass='lg-has-html5'};_this.$slide.eq(index).prepend('<div class="lg-video-cont '+videoClass+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+_poster+'" /></div></div>')}else if(_isVideo){_this.$slide.eq(index).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>');_this.$el.trigger('hasVideo.lg',[index,_src,_html])}else{_this.$slide.eq(index).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+_src+'" /></div>')};_this.$el.trigger('onAferAppendSlide.lg',[index]);_$img=_this.$slide.eq(index).find('.lg-object');if(_sizes){_$img.attr('sizes',_sizes)};if(_srcset){_$img.attr('srcset',_srcset);try{picturefill({elements:[_$img[0]]})}catch(catch$scope$var708587005){console.warn('lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.')}};if(this.s.appendSubHtmlTo!=='.lg-sub-html'){_this.addHtml(index)};_this.$slide.eq(index).addClass('lg-loaded')};_this.$slide.eq(index).find('.lg-object').on('load.lg error.lg',function(){var _speed=0;if(delay&&!$('body').hasClass('lg-from-hash')){_speed=delay};setTimeout(function(){_this.$slide.eq(index).addClass('lg-complete');_this.$el.trigger('onSlideItemLoad.lg',[index,delay||0])},_speed)});if(_isVideo&&_isVideo.html5&&!_hasPoster){_this.$slide.eq(index).addClass('lg-complete')};if(rec===true){if(!_this.$slide.eq(index).hasClass('lg-complete')){_this.$slide.eq(index).find('.lg-object').on('load.lg error.lg',function(){_this.preload(index)})}else{_this.preload(index)}}};Plugin.prototype.slide=function(index,fromTouch,fromThumb,direction){var _prevIndex=this.$outer.find('.lg-current').index(),_this=this;if(_this.lGalleryOn&&(_prevIndex===index)){return};var _length=this.$slide.length,_time=_this.lGalleryOn?this.s.speed:0;if(!_this.lgBusy){if(this.s.download){var _src;if(_this.s.dynamic){_src=_this.s.dynamicEl[index].downloadUrl!==false&&(_this.s.dynamicEl[index].downloadUrl||_this.s.dynamicEl[index].src)}else{_src=_this.$items.eq(index).attr('data-download-url')!=='false'&&(_this.$items.eq(index).attr('data-download-url')||_this.$items.eq(index).attr('href')||_this.$items.eq(index).attr('data-src'))};if(_src){$('#lg-download').attr('href',_src);_this.$outer.removeClass('lg-hide-download')}else{_this.$outer.addClass('lg-hide-download')}};this.$el.trigger('onBeforeSlide.lg',[_prevIndex,index,fromTouch,fromThumb]);_this.lgBusy=true;clearTimeout(_this.hideBartimeout);if(this.s.appendSubHtmlTo==='.lg-sub-html'){setTimeout(function(){_this.addHtml(index)},_time)};this.arrowDisable(index);if(!direction){if(index<_prevIndex){direction='prev'}else if(index>_prevIndex){direction='next'}};if(!fromTouch){_this.$outer.addClass('lg-no-trans');this.$slide.removeClass('lg-prev-slide lg-next-slide');if(direction==='prev'){this.$slide.eq(index).addClass('lg-prev-slide');this.$slide.eq(_prevIndex).addClass('lg-next-slide')}else{this.$slide.eq(index).addClass('lg-next-slide');this.$slide.eq(_prevIndex).addClass('lg-prev-slide')};setTimeout(function(){_this.$slide.removeClass('lg-current');_this.$slide.eq(index).addClass('lg-current');_this.$outer.removeClass('lg-no-trans')},50)}else{this.$slide.removeClass('lg-prev-slide lg-current lg-next-slide');var touchPrev,touchNext;if(_length>2){touchPrev=index-1;touchNext=index+1;if((index===0)&&(_prevIndex===_length-1)){touchNext=0;touchPrev=_length-1}else if((index===_length-1)&&(_prevIndex===0)){touchNext=0;touchPrev=_length-1}}else{touchPrev=0;touchNext=1};if(direction==='prev'){_this.$slide.eq(touchNext).addClass('lg-next-slide')}else{_this.$slide.eq(touchPrev).addClass('lg-prev-slide')};_this.$slide.eq(index).addClass('lg-current')};if(_this.lGalleryOn){setTimeout(function(){_this.loadContent(index,true,0)},this.s.speed+50);setTimeout(function(){_this.lgBusy=false;_this.$el.trigger('onAfterSlide.lg',[_prevIndex,index,fromTouch,fromThumb])},this.s.speed)}else{_this.loadContent(index,true,_this.s.backdropDuration);_this.lgBusy=false;_this.$el.trigger('onAfterSlide.lg',[_prevIndex,index,fromTouch,fromThumb])};_this.lGalleryOn=true;if(this.s.counter){$('#lg-counter-current').text(index+1)}};_this.index=index};Plugin.prototype.goToNextSlide=function(fromTouch){var _this=this,_loop=_this.s.loop;if(fromTouch&&_this.$slide.length<3){_loop=false};if(!_this.lgBusy){if((_this.index+1)<_this.$slide.length){_this.index++;_this.$el.trigger('onBeforeNextSlide.lg',[_this.index]);_this.slide(_this.index,fromTouch,false,'next')}else{if(_loop){_this.index=0;_this.$el.trigger('onBeforeNextSlide.lg',[_this.index]);_this.slide(_this.index,fromTouch,false,'next')}else if(_this.s.slideEndAnimatoin&&!fromTouch){_this.$outer.addClass('lg-right-end');setTimeout(function(){_this.$outer.removeClass('lg-right-end')},400)}}}};Plugin.prototype.goToPrevSlide=function(fromTouch){var _this=this,_loop=_this.s.loop;if(fromTouch&&_this.$slide.length<3){_loop=false};if(!_this.lgBusy){if(_this.index>0){_this.index--;_this.$el.trigger('onBeforePrevSlide.lg',[_this.index,fromTouch]);_this.slide(_this.index,fromTouch,false,'prev')}else{if(_loop){_this.index=_this.$items.length-1;_this.$el.trigger('onBeforePrevSlide.lg',[_this.index,fromTouch]);_this.slide(_this.index,fromTouch,false,'prev')}else if(_this.s.slideEndAnimatoin&&!fromTouch){_this.$outer.addClass('lg-left-end');setTimeout(function(){_this.$outer.removeClass('lg-left-end')},400)}}}};Plugin.prototype.keyPress=function(){var _this=this;if(this.$items.length>1){$(window).on('keyup.lg',function(e){if(_this.$items.length>1){if(e.keyCode===37){e.preventDefault();_this.goToPrevSlide()};if(e.keyCode===39){e.preventDefault();_this.goToNextSlide()}}})};$(window).on('keydown.lg',function(e){if(_this.s.escKey===true&&e.keyCode===27){e.preventDefault();if(!_this.$outer.hasClass('lg-thumb-open')){_this.destroy()}else{_this.$outer.removeClass('lg-thumb-open')}}})};Plugin.prototype.arrow=function(){var _this=this;this.$outer.find('.lg-prev').on('click.lg',function(){_this.goToPrevSlide()});this.$outer.find('.lg-next').on('click.lg',function(){_this.goToNextSlide()})};Plugin.prototype.arrowDisable=function(index){if(!this.s.loop&&this.s.hideControlOnEnd){if((index+1)<this.$slide.length){this.$outer.find('.lg-next').removeAttr('disabled').removeClass('disabled')}else{this.$outer.find('.lg-next').attr('disabled','disabled').addClass('disabled')};if(index>0){this.$outer.find('.lg-prev').removeAttr('disabled').removeClass('disabled')}else{this.$outer.find('.lg-prev').attr('disabled','disabled').addClass('disabled')}}};Plugin.prototype.setTranslate=function($el,xValue,yValue){if(this.s.useLeft){$el.css('left',xValue)}else{$el.css({transform:'translate3d('+(xValue)+'px, '+yValue+'px, 0px)'})}};Plugin.prototype.touchMove=function(startCoords,endCoords){var distance=endCoords-startCoords;if(Math.abs(distance)>15){this.$outer.addClass('lg-dragging');this.setTranslate(this.$slide.eq(this.index),distance,0);this.setTranslate($('.lg-prev-slide'),-this.$slide.eq(this.index).width()+distance,0);this.setTranslate($('.lg-next-slide'),this.$slide.eq(this.index).width()+distance,0)}};Plugin.prototype.touchEnd=function(distance){var _this=this;if(_this.s.mode!=='lg-slide'){_this.$outer.addClass('lg-slide')};this.$slide.not('.lg-current, .lg-prev-slide, .lg-next-slide').css('opacity','0');setTimeout(function(){_this.$outer.removeClass('lg-dragging');if((distance<0)&&(Math.abs(distance)>_this.s.swipeThreshold)){_this.goToNextSlide(true)}else if((distance>0)&&(Math.abs(distance)>_this.s.swipeThreshold)){_this.goToPrevSlide(true)}else if(Math.abs(distance)<5){_this.$el.trigger('onSlideClick.lg')};_this.$slide.removeAttr('style')});setTimeout(function(){if(!_this.$outer.hasClass('lg-dragging')&&_this.s.mode!=='lg-slide'){_this.$outer.removeClass('lg-slide')}},_this.s.speed+100)};Plugin.prototype.enableSwipe=function(){var _this=this,startCoords=0,endCoords=0,isMoved=false;if(_this.s.enableSwipe&&_this.doCss()){_this.$slide.on('touchstart.lg',function(e){if(!_this.$outer.hasClass('lg-zoomed')&&!_this.lgBusy){e.preventDefault();_this.manageSwipeClass();startCoords=e.originalEvent.targetTouches[0].pageX}});_this.$slide.on('touchmove.lg',function(e){if(!_this.$outer.hasClass('lg-zoomed')){e.preventDefault();endCoords=e.originalEvent.targetTouches[0].pageX;_this.touchMove(startCoords,endCoords);isMoved=true}});_this.$slide.on('touchend.lg',function(){if(!_this.$outer.hasClass('lg-zoomed')){if(isMoved){isMoved=false;_this.touchEnd(endCoords-startCoords)}else{_this.$el.trigger('onSlideClick.lg')}}})}};Plugin.prototype.enableDrag=function(){var _this=this,startCoords=0,endCoords=0,isDraging=false,isMoved=false;if(_this.s.enableDrag&&_this.doCss()){_this.$slide.on('mousedown.lg',function(e){if(!_this.$outer.hasClass('lg-zoomed')&&!_this.lgBusy&&!$(e.target).text().trim()){e.preventDefault();_this.manageSwipeClass();startCoords=e.pageX;isDraging=true;_this.$outer.scrollLeft+=1;_this.$outer.scrollLeft-=1;_this.$outer.removeClass('lg-grab').addClass('lg-grabbing');_this.$el.trigger('onDragstart.lg')}});$(window).on('mousemove.lg',function(e){if(isDraging){isMoved=true;endCoords=e.pageX;_this.touchMove(startCoords,endCoords);_this.$el.trigger('onDragmove.lg')}});$(window).on('mouseup.lg',function(e){if(isMoved){isMoved=false;_this.touchEnd(endCoords-startCoords);_this.$el.trigger('onDragend.lg')}else if($(e.target).hasClass('lg-object')||$(e.target).hasClass('lg-video-play')){_this.$el.trigger('onSlideClick.lg')};if(isDraging){isDraging=false;_this.$outer.removeClass('lg-grabbing').addClass('lg-grab')}})}};Plugin.prototype.manageSwipeClass=function(){var _touchNext=this.index+1,_touchPrev=this.index-1;if(this.s.loop&&this.$slide.length>2){if(this.index===0){_touchPrev=this.$slide.length-1}else if(this.index===this.$slide.length-1){_touchNext=0}};this.$slide.removeClass('lg-next-slide lg-prev-slide');if(_touchPrev>-1){this.$slide.eq(_touchPrev).addClass('lg-prev-slide')};this.$slide.eq(_touchNext).addClass('lg-next-slide')};Plugin.prototype.mousewheel=function(){var _this=this;_this.$outer.on('mousewheel.lg',function(e){if(!e.deltaY){return};if(e.deltaY>0){_this.goToPrevSlide()}else{_this.goToNextSlide()};e.preventDefault()})};Plugin.prototype.closeGallery=function(){var _this=this,mousedown=false;this.$outer.find('.lg-close').on('click.lg',function(){_this.destroy()});if(_this.s.closable){_this.$outer.on('mousedown.lg',function(e){if($(e.target).is('.lg-outer')||$(e.target).is('.lg-item ')||$(e.target).is('.lg-img-wrap')){mousedown=true}else{mousedown=false}});_this.$outer.on('mousemove.lg',function(){mousedown=false});_this.$outer.on('mouseup.lg',function(e){if($(e.target).is('.lg-outer')||$(e.target).is('.lg-item ')||$(e.target).is('.lg-img-wrap')&&mousedown){if(!_this.$outer.hasClass('lg-dragging')){_this.destroy()}}})}};Plugin.prototype.destroy=function(d){var _this=this;if(!d){_this.$el.trigger('onBeforeClose.lg');$(window).scrollTop(_this.prevScrollTop)};if(d){if(!_this.s.dynamic){this.$items.off('click.lg click.lgcustom')};$.removeData(_this.el,'lightGallery')};this.$el.off('.lg.tm');$.each($.fn.lightGallery.modules,function(key){if(_this.modules[key]){_this.modules[key].destroy()}});this.lGalleryOn=false;clearTimeout(_this.hideBartimeout);this.hideBartimeout=false;$(window).off('.lg');$('body').removeClass('lg-on lg-from-hash');if(_this.$outer){_this.$outer.removeClass('lg-visible')};$('.lg-backdrop').removeClass('in');setTimeout(function(){if(_this.$outer){_this.$outer.remove()};$('.lg-backdrop').remove();if(!d){_this.$el.trigger('onCloseAfter.lg')}},_this.s.backdropDuration+50)};$.fn.lightGallery=function(options){return this.each(function(){if(!$.data(this,'lightGallery')){$.data(this,'lightGallery',new Plugin(this,options))}else{try{$(this).data('lightGallery').init()}catch(catch$scope$var708587005){console.error('lightGallery has not initiated properly')}}})};$.fn.lightGallery.modules={}})();
/*! lg-thumbnail - v1.1.0 - 2017-08-08
* http://sachinchoolur.github.io/lightGallery
* Copyright (c) 2017 Sachin N; Licensed GPLv3 */
!function(a,b){'function'==typeof define&&define.amd?define(['jquery'],function(a){return b(a)}):'object'==typeof exports?module.exports=b(require('jquery')):b(jQuery)}(this,function(a){!function(){'use strict';var b={thumbnail:!0,animateThumb:!0,currentPagerPosition:'middle',thumbWidth:100,thumbHeight:'80px',thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toogleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:'thumbnail_small',loadDailymotionThumbnail:!0},c=function(c){return this.core=a(c).data('lightGallery'),this.core.s=a.extend({},b,this.core.s),this.$el=a(c),this.$thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.core.s.animateThumb&&(this.core.s.thumbHeight='100%'),this.left=0,this.init(),this};c.prototype.init=function(){var a=this;this.core.s.thumbnail&&this.core.$items.length>1&&(this.core.s.showThumbByDefault&&setTimeout(function(){a.core.$outer.addClass('lg-thumb-open')},700),this.core.s.pullCaptionUp&&this.core.$outer.addClass('lg-pull-caption-up'),this.build(),this.core.s.animateThumb&&this.core.doCss()?(this.core.s.enableThumbDrag&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toogle(),this.thumbkeyPress())},c.prototype.build=function(){function b(a,b,c){var g,h=d.core.isVideo(a,c)||{},i='';h.youtube||h.vimeo||h.dailymotion?h.youtube?g=d.core.s.loadYoutubeThumbnail?'//img.youtube.com/vi/'+h.youtube[1]+'/'+d.core.s.youtubeThumbSize+'.jpg':b:h.vimeo?d.core.s.loadVimeoThumbnail?(g='//i.vimeocdn.com/video/error_'+f+'.jpg',i=h.vimeo[1]):g=b:h.dailymotion&&(g=d.core.s.loadDailymotionThumbnail?'//www.dailymotion.com/thumbnail/video/'+h.dailymotion[1]:b):g=b,e+='<div data-vimeo-id="'+i+'" class="lg-thumb-item" style="width:'+d.core.s.thumbWidth+'px; height: '+d.core.s.thumbHeight+'; margin-right: '+d.core.s.thumbMargin+'px"><img src="'+g+'" /></div>',i=''};var c,d=this,e='',f='',g='<div class="lg-thumb-outer"><div class="lg-thumb lg-group"></div></div>';switch(this.core.s.vimeoThumbSize){case'thumbnail_large':f='640';break;case'thumbnail_medium':f='200x150';break;case'thumbnail_small':f='100x75'};if(d.core.$outer.addClass('lg-has-thumb'),d.core.$outer.find('.lg').append(g),d.$thumbOuter=d.core.$outer.find('.lg-thumb-outer'),d.thumbOuterWidth=d.$thumbOuter.width(),d.core.s.animateThumb&&d.core.$outer.find('.lg-thumb').css({width:d.thumbTotalWidth+'px',position:'relative'}),this.core.s.animateThumb&&d.$thumbOuter.css('height',d.core.s.thumbContHeight+'px'),d.core.s.dynamic)for(var h=0;h<d.core.s.dynamicEl.length;h++)b(d.core.s.dynamicEl[h].src,d.core.s.dynamicEl[h].thumb,h);else d.core.$items.each(function(c){d.core.s.exThumbImage?b(a(this).attr('href')||a(this).attr('data-src'),a(this).attr(d.core.s.exThumbImage),c):b(a(this).attr('href')||a(this).attr('data-src'),a(this).find('img').attr('src'),c)});d.core.$outer.find('.lg-thumb').html(e),c=d.core.$outer.find('.lg-thumb-item'),c.each(function(){var b=a(this),c=b.attr('data-vimeo-id');c&&a.getJSON('//www.vimeo.com/api/v2/video/'+c+'.json?callback=?',{format:'json'},function(a){b.find('img').attr('src',a[0][d.core.s.vimeoThumbSize])})}),c.eq(d.core.index).addClass('active'),d.core.$el.on('onBeforeSlide.lg.tm',function(){c.removeClass('active'),c.eq(d.core.index).addClass('active')}),c.on('click.lg touchend.lg',function(){var b=a(this);setTimeout(function(){(d.thumbClickable&&!d.core.lgBusy||!d.core.doCss())&&(d.core.index=b.index(),d.core.slide(d.core.index,!1,!0,!1))},50)}),d.core.$el.on('onBeforeSlide.lg.tm',function(){d.animateThumb(d.core.index)}),a(window).on('resize.lg.thumb orientationchange.lg.thumb',function(){setTimeout(function(){d.animateThumb(d.core.index),d.thumbOuterWidth=d.$thumbOuter.width()},200)})},c.prototype.setTranslate=function(a){this.core.$outer.find('.lg-thumb').css({transform:'translate3d(-'+a+'px, 0px, 0px)'})},c.prototype.animateThumb=function(a){var b=this.core.$outer.find('.lg-thumb');if(this.core.s.animateThumb){var c;switch(this.core.s.currentPagerPosition){case'left':c=0;break;case'middle':c=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case'right':c=this.thumbOuterWidth-this.core.s.thumbWidth};this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*a-1-c,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn?(b.hasClass('on')||this.core.$outer.find('.lg-thumb').css('transition-duration',this.core.s.speed+'ms'),this.core.doCss()||b.animate({left:-this.left+'px'},this.core.s.speed)):this.core.doCss()||b.css('left',-this.left+'px'),this.setTranslate(this.left)}},c.prototype.enableThumbDrag=function(){var b=this,c=0,d=0,e=!1,f=!1,g=0;b.$thumbOuter.addClass('lg-grab'),b.core.$outer.find('.lg-thumb').on('mousedown.lg.thumb',function(a){b.thumbTotalWidth>b.thumbOuterWidth&&(a.preventDefault(),c=a.pageX,e=!0,b.core.$outer.scrollLeft+=1,b.core.$outer.scrollLeft-=1,b.thumbClickable=!1,b.$thumbOuter.removeClass('lg-grab').addClass('lg-grabbing'))}),a(window).on('mousemove.lg.thumb',function(a){e&&(g=b.left,f=!0,d=a.pageX,b.$thumbOuter.addClass('lg-dragging'),g-=d-c,g>b.thumbTotalWidth-b.thumbOuterWidth&&(g=b.thumbTotalWidth-b.thumbOuterWidth),g<0&&(g=0),b.setTranslate(g))}),a(window).on('mouseup.lg.thumb',function(){f?(f=!1,b.$thumbOuter.removeClass('lg-dragging'),b.left=g,Math.abs(d-c)<b.core.s.swipeThreshold&&(b.thumbClickable=!0)):b.thumbClickable=!0,e&&(e=!1,b.$thumbOuter.removeClass('lg-grabbing').addClass('lg-grab'))})},c.prototype.enableThumbSwipe=function(){var a=this,b=0,c=0,d=!1,e=0;a.core.$outer.find('.lg-thumb').on('touchstart.lg',function(c){a.thumbTotalWidth>a.thumbOuterWidth&&(c.preventDefault(),b=c.originalEvent.targetTouches[0].pageX,a.thumbClickable=!1)}),a.core.$outer.find('.lg-thumb').on('touchmove.lg',function(f){a.thumbTotalWidth>a.thumbOuterWidth&&(f.preventDefault(),c=f.originalEvent.targetTouches[0].pageX,d=!0,a.$thumbOuter.addClass('lg-dragging'),e=a.left,e-=c-b,e>a.thumbTotalWidth-a.thumbOuterWidth&&(e=a.thumbTotalWidth-a.thumbOuterWidth),e<0&&(e=0),a.setTranslate(e))}),a.core.$outer.find('.lg-thumb').on('touchend.lg',function(){a.thumbTotalWidth>a.thumbOuterWidth&&d?(d=!1,a.$thumbOuter.removeClass('lg-dragging'),Math.abs(c-b)<a.core.s.swipeThreshold&&(a.thumbClickable=!0),a.left=e):a.thumbClickable=!0})},c.prototype.toogle=function(){var a=this;a.core.s.toogleThumb&&(a.core.$outer.addClass('lg-can-toggle'),a.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>'),a.core.$outer.find('.lg-toogle-thumb').on('click.lg',function(){a.core.$outer.toggleClass('lg-thumb-open')}))},c.prototype.thumbkeyPress=function(){var b=this;a(window).on('keydown.lg.thumb',function(a){38===a.keyCode?(a.preventDefault(),b.core.$outer.addClass('lg-thumb-open')):40===a.keyCode&&(a.preventDefault(),b.core.$outer.removeClass('lg-thumb-open'))})},c.prototype.destroy=function(){this.core.s.thumbnail&&this.core.$items.length>1&&(a(window).off('resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb'),this.$thumbOuter.remove(),this.core.$outer.removeClass('lg-has-thumb'))},a.fn.lightGallery.modules.Thumbnail=c}()});typeof JSON!='object'&&(JSON={}),function(){'use strict';function f(e){return e<10?'0'+e:e};function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=='string'?t:'\\u'+('0000'+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'};function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=='object'&&typeof a.toJSON=='function'&&(a=a.toJSON(e)),typeof rep=='function'&&(a=rep.call(t,e,a));switch(typeof a){case'string':return quote(a);case'number':return isFinite(a)?String(a):'null';case'boolean':case'null':return String(a);case'object':if(!a)return'null';gap+=indent,u=[];if(Object.prototype.toString.apply(a)==='[object Array]'){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||'null';return i=u.length===0?'[]':gap?'[\n'+gap+u.join(',\n'+gap)+'\n'+o+']':'['+u.join(',')+']',gap=o,i};if(rep&&typeof rep=='object'){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=='string'&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?': ':':')+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?': ':':')+i));return i=u.length===0?'{}':gap?'{\n'+gap+u.join(',\n'+gap)+'\n'+o+'}':'{'+u.join(',')+'}',gap=o,i}};typeof Date.prototype.toJSON!='function'&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','	':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;typeof JSON.stringify!='function'&&(JSON.stringify=function(e,t,n){var r;gap='',indent='';if(typeof n=='number')for(r=0;r<n;r+=1)indent+=' ';else typeof n=='string'&&(indent=n);rep=t;if(!t||typeof t=='function'||typeof t=='object'&&typeof t.length=='number')return str('',{'':e});throw new Error('JSON.stringify');}),typeof JSON.parse!='function'&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=='object')for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)};var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return'\\u'+('0000'+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'')))return j=eval('('+text+')'),typeof reviver=='function'?walk({'':j},''):j;throw new SyntaxError('JSON.parse');})}(),function(e,t){'use strict';var n=e.History=e.History||{},r=e.jQuery;if(typeof n.Adapter!='undefined')throw new Error('History.js Adapter has already been loaded...');n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t,n){r(e).trigger(t,n)},extractEventData:function(e,n,r){var i=n&&n.originalEvent&&n.originalEvent[e]||r&&r[e]||t;return i},onDomLoad:function(e){r(e)}},typeof n.init!='undefined'&&n.init()}(window),function(e,t){'use strict';var n=e.document,r=e.setTimeout||r,i=e.clearTimeout||i,s=e.setInterval||s,o=e.History=e.History||{};if(typeof o.initHtml4!='undefined')throw new Error('History.js HTML4 Support has already been loaded...');o.initHtml4=function(){if(typeof o.initHtml4.initialized!='undefined')return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t=o.getHashByIndex(),n;return n=e===t,n},o.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,'%'),t=encodeURIComponent(t).replace(/%25/g,'%'),e===t},o.saveHash=function(e){return o.isLastHash(e)?!1:(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){var t=null;return typeof e=='undefined'?t=o.savedHashes[o.savedHashes.length-1]:e<0?t=o.savedHashes[o.savedHashes.length+e]:t=o.savedHashes[e],t},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var r=o.getHashByState(e),i;return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[r]=i,!0},o.discardHash=function(e,t,n){var r={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=r,!0},o.discardedState=function(e){var t=o.getHashByState(e),n;return n=o.discardedStates[t]||!1,n},o.discardedHash=function(e){var t=o.discardedHashes[e]||!1;return t},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var t='',r,i,u,a,f=Boolean(o.getHash());return o.isInternetExplorer()?(r='historyjs-iframe',i=n.createElement('iframe'),i.setAttribute('id',r),i.setAttribute('src','#'),i.style.display='none',n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),u='',a=!1,o.checkerFunction=function(){if(a)return!1;a=!0;var n=o.getHash(),r=o.getHash(i.contentWindow.document);return n!==t?(t=n,r!==n&&(u=r=n,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(n)),o.Adapter.trigger(e,'hashchange')):r!==u&&(u=r,f&&r===''?o.back():o.setHash(r,!1)),a=!1,!0}):o.checkerFunction=function(){var n=o.getHash()||'';return n!==t&&(t=n,o.Adapter.trigger(e,'hashchange')),!0},o.intervalList.push(s(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n=t&&t.newURL||o.getLocationHref(),r=o.getHashByUrl(n),i=null,s=null,u=null,a;return o.isLastHash(r)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(r),r&&o.isTraditionalAnchor(r)?(o.Adapter.trigger(e,'anchorchange'),o.busy(!1),!1):(i=o.extractState(o.getFullUrl(r||o.getLocationHref()),!0),o.isLastSavedState(i)?(o.busy(!1),!1):(s=o.getHashByState(i),a=o.discardedState(i),a?(o.getHashByIndex(-2)===o.getHashByState(a.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(i.data,i.title,encodeURI(i.url),!1),!0))))},o.Adapter.bind(e,'hashchange',o.onHashChange),o.pushState=function(t,n,r,i){r=encodeURI(r).replace(/%25/g,'%');if(o.getHashByUrl(r))throw new Error('History.js does not support states with fragment-identifiers (hashes/anchors).');if(i!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getHash(),c=o.expectedStateId==s.id;return o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),u===f?(o.busy(!1),!1):(o.saveState(s),c||o.Adapter.trigger(e,'statechange'),!o.isHashEqual(u,l)&&!o.isHashEqual(u,o.getShortUrl(o.getLocationHref()))&&o.setHash(u,!1),o.busy(!1),!0)},o.replaceState=function(t,n,r,i){r=encodeURI(r).replace(/%25/g,'%');if(o.getHashByUrl(r))throw new Error('History.js does not support states with fragment-identifiers (hashes/anchors).');if(i!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getStateByIndex(-2);return o.discardState(a,s,l),u===f?(o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),o.saveState(s),o.Adapter.trigger(e,'statechange'),o.busy(!1)):o.pushState(s.data,s.title,s.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,'hashchange')})},typeof o.init!='undefined'&&o.init()}(window),function(e,t){'use strict';var n=e.console||t,r=e.document,i=e.navigator,s=!1,o=e.setTimeout,u=e.clearTimeout,a=e.setInterval,f=e.clearInterval,l=e.JSON,c=e.alert,h=e.History=e.History||{},p=e.history;try{s=e.sessionStorage,s.setItem('TEST','1'),s.removeItem('TEST')}catch(catch$scope$var708587005){s=!1};l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode;if(typeof h.init!='undefined')throw new Error('History.js Core has already been loaded...');h.init=function(e){return typeof h.Adapter=='undefined'?!1:(typeof h.initCore!='undefined'&&h.initCore(),typeof h.initHtml4!='undefined'&&h.initHtml4(),!0)},h.initCore=function(d){if(typeof h.initCore.initialized!='undefined')return!1;h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||r.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if(typeof t!='undefined'&&t!==null){for(e=0;e<t.length;e++)f(t[e]);h.intervalList=null}},h.debug=function(){(h.options.debug||!1)&&h.log.apply(h,arguments)},h.log=function(){var e=typeof n!='undefined'&&typeof n.log!='undefined'&&typeof n.log.apply!='undefined',t=r.getElementById('log'),i,s,o,u,a;e?(u=Array.prototype.slice.call(arguments),i=u.shift(),typeof n.debug!='undefined'?n.debug.apply(n,[i,u]):n.log.apply(n,[i,u])):i='\n'+arguments[0]+'\n';for(s=1,o=arguments.length;s<o;++s){a=arguments[s];if(typeof a=='object'&&typeof l!='undefined')try{a=l.stringify(a)}catch(catch$scope$var708587005){};i+='\n'+a+'\n'};return t?(t.value+=i+'\n-----\n',t.scrollTop=t.scrollHeight-t.clientHeight):e||c(i),!0},h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached=typeof h.getInternetExplorerMajorVersion.cached!='undefined'?h.getInternetExplorerMajorVersion.cached:function(){var e=3,t=r.createElement('div'),n=t.getElementsByTagName('i');while((t.innerHTML='<!--[if gt IE '+(++e)+']><i></i><![endif]-->')&&n[0]);return e>4?e:!1}();return e},h.isInternetExplorer=function(){var e=h.isInternetExplorer.cached=typeof h.isInternetExplorer.cached!='undefined'?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return e},h.options.html4Mode?h.emulated={pushState:!0,hashChange:!0}:h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!('onhashchange'in e||'onhashchange'in r)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&i.vendor==='Apple Computer, Inc.'&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&i.vendor==='Apple Computer, Inc.'&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=l.stringify(e),n=l.parse(t)):n={},n},h.getRootUrl=function(){var e=r.location.protocol+'//'+(r.location.hostname||r.location.host);if(r.location.port||!1)e+=':'+r.location.port;return e+='/',e},h.getBaseHref=function(){var e=r.getElementsByTagName('base'),t=null,n='';return e.length===1&&(t=e[0],n=t.href.replace(/[^\/]+$/,'')),n=n.replace(/\/+$/,''),n&&(n+='/'),n},h.getBaseUrl=function(){var e=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return e},h.getPageUrl=function(){var e=h.getState(!1,!1),t=(e||{}).url||h.getLocationHref(),n;return n=t.replace(/\/+$/,'').replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+'/'}),n},h.getBasePageUrl=function(){var e=h.getLocationHref().replace(/[#\?].*/,'').replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?'':e}).replace(/\/+$/,'')+'/';return e},h.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);return t=typeof t=='undefined'?!0:t,/[a-z]+\:\/\//.test(e)||(r==='/'?n=h.getRootUrl()+e.replace(/^\/+/,''):r==='#'?n=h.getPageUrl().replace(/#.*/,'')+e:r==='?'?n=h.getPageUrl().replace(/[\?#].*/,'')+e:t?n=h.getBaseUrl()+e.replace(/^(\.\/)+/,''):n=h.getBasePageUrl()+e.replace(/^(\.\/)+/,'')),n.replace(/\#$/,'')},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),r=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,'')),t=t.replace(r,'/'),h.isTraditionalAnchor(t)&&(t='./'+t),t=t.replace(/^(\.\/)+/g,'./').replace(/\#$/,''),t},h.getLocationHref=function(e){return e=e||r,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,''))===e.location.hash?e.location.href:e.URL.indexOf('#')==-1&&e.location.href.indexOf('#')!=-1?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){typeof e=='undefined'&&(e=!0),typeof t=='undefined'&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&(n=h.cloneObject(n),n.url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var t=h.extractId(e.url),n;if(!t){n=h.getStateString(e);if(typeof h.stateToId[n]!='undefined')t=h.stateToId[n];else if(typeof h.store.stateToId[n]!='undefined')t=h.store.stateToId[n];else{for(;;){t=(new Date).getTime()+String(Math.random()).replace(/\D/g,'');if(typeof h.idToState[t]=='undefined'&&typeof h.store.idToState[t]=='undefined')break};h.stateToId[n]=t,h.idToState[t]=e}};return t},h.normalizeState=function(e){var t,n;if(!e||typeof e!='object')e={};if(typeof e.normalized!='undefined')return e;if(!e.data||typeof e.data!='object')e.data={};return t={},t.normalized=!0,t.title=e.title||'',t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,''),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&h.options.disableSuid!==!0&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,''),/\?/.test(t.hash)||(t.hash+='?'),t.hash+='&_suid='+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t},h.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=h.normalizeState(r),r},h.getStateById=function(e){e=String(e);var n=h.idToState[e]||h.store.idToState[e]||t;return n},h.getStateString=function(e){var t,n,r;return t=h.normalizeState(e),n={data:t.data,title:e.title,url:e.url},r=l.stringify(n),r},h.getStateId=function(e){var t,n;return t=h.normalizeState(e),n=t.id,n},h.getHashByState=function(e){var t,n;return t=h.normalizeState(e),n=t.hash,n},h.extractId=function(e){var t,n,r,i;return e.indexOf('#')!=-1?i=e.split('#')[0]:i=e,n=/(.*)\&_suid=([0-9]+)$/.exec(i),r=n?n[1]||e:e,t=n?String(n[2]||''):'',t||!1},h.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},h.extractState=function(e,t){var n=null,r,i;return t=t||!1,r=h.extractId(e),r&&(n=h.getStateById(r)),n||(i=h.getFullUrl(e),r=h.getIdByUrl(i)||!1,r&&(n=h.getStateById(r)),!n&&t&&!h.isTraditionalAnchor(e)&&(n=h.createStateObject(null,null,i))),n},h.getIdByUrl=function(e){var n=h.urlToId[e]||h.store.urlToId[e]||t;return n},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t},h.hasUrlDuplicate=function(e){var t=!1,n;return n=h.extractState(e.url),t=n&&n.id!==e.id,t},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t=!1,n,r,i;return h.savedStates.length&&(n=e.id,r=h.getLastSavedState(),i=r.id,t=n===i),t},h.saveState=function(e){return h.isLastSavedState(e)?!1:(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){var t=null;return typeof e=='undefined'?t=h.savedStates[h.savedStates.length-1]:e<0?t=h.savedStates[h.savedStates.length+e]:t=h.savedStates[e],t},h.getCurrentIndex=function(){var e=null;return h.savedStates.length<1?e=0:e=h.savedStates.length-1,e},h.getHash=function(e){var t=h.getLocationHref(e),n;return n=h.getHashByUrl(t),n},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t),t},h.normalizeHash=function(e){var t=e.replace(/[^#]*#/,'').replace(/#.*/,'');return t},h.setHash=function(e,t){var n,i;return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),n=h.extractState(e,!0),n&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(i=h.getPageUrl(),h.pushState(null,null,i+'#'+e,!1)):r.location.hash=e),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURIComponent(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,'!').replace(/\%26/g,'&').replace(/\%3D/g,'=').replace(/\%3F/g,'?')),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,'$2');return t=h.unescapeHash(t),t},h.setTitle=function(e){var t=e.title,n;t||(n=h.getStateByIndex(0),n&&n.url===e.url&&(t=n.title||h.options.initialTitle));try{r.getElementsByTagName('title')[0].innerHTML=t.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ')}catch(catch$scope$var708587005){};return r.title=t,h},h.queues=[],h.busy=function(e){typeof e!='undefined'?h.busy.flag=e:typeof h.busy.flag=='undefined'&&(h.busy.flag=!1);if(!h.busy.flag){u(h.busy.timeout);var t=function(){var e,n,r;if(h.busy.flag)return;for(e=h.queues.length-1;e>=0;--e){n=h.queues[e];if(n.length===0)continue;r=n.shift(),h.fireQueueItem(r),h.busy.timeout=o(t,h.options.busyDelay)}};h.busy.timeout=o(t,h.options.busyDelay)};return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return typeof e=='function'&&(e={callback:e}),typeof t!='undefined'&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(u(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t=h.extractState(h.getLocationHref()),n;if(!h.isLastSavedState(t))return n=t,n||(n=h.createStateObject()),h.Adapter.trigger(e,'popstate'),h;return},h.back=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)h.forward(t);else{if(!(e<0))throw new Error('History.go: History.go requires a positive or negative integer passed.');for(n=-1;n>=e;--n)h.back(t)};return h};if(h.emulated.pushState){var v=function(){};h.pushState=h.pushState||v,h.replaceState=h.replaceState||v}else h.onPopState=function(t,n){var r=!1,i=!1,s,o;return h.doubleCheckComplete(),s=h.getHash(),s?(o=h.extractState(s||h.getLocationHref(),!0),o?h.replaceState(o.data,o.title,o.url,!1):(h.Adapter.trigger(e,'anchorchange'),h.busy(!1)),h.expectedStateId=!1,!1):(r=h.Adapter.extractEventData('state',t,n)||!1,r?i=h.getStateById(r):h.expectedStateId?i=h.getStateById(h.expectedStateId):i=h.extractState(h.getLocationHref()),i||(i=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(i)?(h.busy(!1),!1):(h.storeState(i),h.saveState(i),h.setTitle(i),h.Adapter.trigger(e,'statechange'),h.busy(!1),!0))},h.Adapter.bind(e,'popstate',h.onPopState),h.pushState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');if(i!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.pushState(s.id,s.title,s.url),h.Adapter.trigger(e,'popstate')),!0},h.replaceState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');if(i!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.replaceState(s.id,s.title,s.url),h.Adapter.trigger(e,'popstate')),!0};if(s){try{h.store=l.parse(s.getItem('History.store'))||{}}catch(catch$scope$var708587005){h.store={}};h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,'unload',h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),s&&(h.onUnload=function(){var e,t,n;try{e=l.parse(s.getItem('History.store'))||{}}catch(catch$scope$var708587005){e={}};e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState){if(!h.idToState.hasOwnProperty(t))continue;e.idToState[t]=h.idToState[t]};for(t in h.urlToId){if(!h.urlToId.hasOwnProperty(t))continue;e.urlToId[t]=h.urlToId[t]};for(t in h.stateToId){if(!h.stateToId.hasOwnProperty(t))continue;e.stateToId[t]=h.stateToId[t]};h.store=e,h.normalizeStore(),n=l.stringify(e);try{s.setItem('History.store',n)}catch(catch$scope$var708587005){if(catch$scope$var708587005.code!==DOMException.QUOTA_EXCEEDED_ERR)throw catch$scope$var708587005;s.length&&(s.removeItem('History.store'),s.setItem('History.store',n))}},h.intervalList.push(a(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,'beforeunload',h.onUnload),h.Adapter.bind(e,'unload',h.onUnload));if(!h.emulated.pushState){h.bugs.safariPoll&&h.intervalList.push(a(h.safariStatePoll,h.options.safariPollInterval));if(i.vendor==='Apple Computer, Inc.'||(i.appCodeName||'')==='Mozilla')h.Adapter.bind(e,'hashchange',function(){h.Adapter.trigger(e,'popstate')}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,'hashchange')})}},(!h.options||!h.options.delayInit)&&h.init()}(window);(function(factory){if(typeof define==='function'&&define.amd){define(['inputmask.dependencyLib'],factory)}else if(typeof exports==='object'){module.exports=factory(require('./inputmask.dependencyLib.jquery'))}else{factory(window.dependencyLib||jQuery)}}(function($){function Inputmask(alias,options){if(!(this instanceof Inputmask)){return new Inputmask(alias,options)};if($.isPlainObject(alias)){options=alias}else{options=options||{};options.alias=alias};this.el=undefined;this.opts=$.extend(true,{},this.defaults,options);this.noMasksCache=options&&options.definitions!==undefined;this.userOptions=options||{};this.events={};resolveAlias(this.opts.alias,options,this.opts)};Inputmask.prototype={defaults:{placeholder:'_',optionalmarker:{start:'[',end:']'},quantifiermarker:{start:'{',end:'}'},groupmarker:{start:'(',end:')'},alternatormarker:'|',escapeChar:'\\',mask:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:true,autoUnmask:false,removeMaskOnSubmit:false,clearMaskOnLostFocus:true,insertMode:true,clearIncomplete:false,aliases:{},alias:null,onKeyDown:$.noop,onBeforeMask:null,onBeforePaste:function(pastedValue,opts){return $.isFunction(opts.onBeforeMask)?opts.onBeforeMask(pastedValue,opts):pastedValue},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:true,showMaskOnHover:true,onKeyValidation:$.noop,skipOptionalPartCharacter:' ',showTooltip:false,tooltip:undefined,numericInput:false,rightAlign:false,undoOnEscape:true,radixPoint:'',radixPointDefinitionSymbol:undefined,groupSeparator:'',keepStatic:null,positionCaretOnTab:false,tabThrough:false,supportsInputType:['text','tel','password'],definitions:{'9':{validator:'[0-9]',cardinality:1,definitionSymbol:'*'},'a':{validator:'[A-Za-z\u0410-\u044F\u0401\u0451\u00C0-\u00FF\u00B5]',cardinality:1,definitionSymbol:'*'},'*':{validator:'[0-9A-Za-z\u0410-\u044F\u0401\u0451\u00C0-\u00FF\u00B5]',cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:null,canClearPosition:$.noop,postValidation:null,staticDefinitionSymbol:undefined,jitMasking:false,nullable:true,inputEventOnly:false,positionCaretOnClick:'lvp'},masksCache:{},mask:function(elems){var that=this;if(typeof elems==='string'){elems=document.getElementById(elems)||document.querySelectorAll(elems)};elems=elems.nodeName?[elems]:elems;$.each(elems,function(ndx,el){var scopedOpts=$.extend(true,{},that.opts);importAttributeOptions(el,scopedOpts,$.extend(true,{},that.userOptions));var maskset=generateMaskSet(scopedOpts,that.noMasksCache);if(maskset!==undefined){if(el.inputmask!==undefined){el.inputmask.remove()};el.inputmask=new Inputmask();el.inputmask.opts=scopedOpts;el.inputmask.noMasksCache=that.noMasksCache;el.inputmask.userOptions=$.extend(true,{},that.userOptions);el.inputmask.el=el;el.inputmask.maskset=maskset;el.inputmask.isRTL=false;$.data(el,'_inputmask_opts',scopedOpts);maskScope({'action':'mask','el':el})}});return elems&&elems[0]?(elems[0].inputmask||this):this},option:function(options,noremask){if(typeof options==='string'){return this.opts[options]}else if(typeof options==='object'){$.extend(this.userOptions,options);if(this.el&&noremask!==true){this.mask(this.el)};return this}},unmaskedvalue:function(value){return maskScope({'action':'unmaskedvalue','el':this.el,'value':value},this.el&&this.el.inputmask?this.el.inputmask.maskset:generateMaskSet(this.opts,this.noMasksCache),this.opts)},remove:function(){if(this.el){maskScope({'action':'remove','el':this.el});this.el.inputmask=undefined;return this.el}},getemptymask:function(){return maskScope({'action':'getemptymask'},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return maskScope({'action':'isComplete','el':this.el},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},getmetadata:function(){return maskScope({'action':'getmetadata'},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},isValid:function(value){return maskScope({'action':'isValid','value':value},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},format:function(value,metadata){return maskScope({'action':'format','value':value,'metadata':metadata},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)}};Inputmask.extendDefaults=function(options){$.extend(true,Inputmask.prototype.defaults,options)};Inputmask.extendDefinitions=function(definition){$.extend(true,Inputmask.prototype.defaults.definitions,definition)};Inputmask.extendAliases=function(alias){$.extend(true,Inputmask.prototype.defaults.aliases,alias)};Inputmask.format=function(value,options,metadata){return Inputmask(options).format(value,metadata)};Inputmask.unmask=function(value,options){return Inputmask(options).unmaskedvalue(value)};Inputmask.isValid=function(value,options){return Inputmask(options).isValid(value)};Inputmask.remove=function(elems){$.each(elems,function(ndx,el){if(el.inputmask)el.inputmask.remove()})};Inputmask.escapeRegex=function(str){var specials=['/','.','*','+','?','|','(',')','[',']','{','}','\\','$','^'];return str.replace(new RegExp('(\\'+specials.join('|\\')+')','gim'),'\\$1')};Inputmask.keyCode={ALT:18,BACKSPACE:8,BACKSPACE_SAFARI:127,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91,X:88};function isInputEventSupported(eventName){var el=document.createElement('input'),evName='on'+eventName,isSupported=(evName in el);if(!isSupported){el.setAttribute(evName,'return;');isSupported=typeof el[evName]=='function'};el=null;return isSupported};function isElementTypeSupported(input,opts){var elementType=input.getAttribute('type'),isSupported=(input.tagName==='INPUT'&&$.inArray(elementType,opts.supportsInputType)!==-1)||input.isContentEditable||input.tagName==='TEXTAREA';if(!isSupported&&input.tagName==='INPUT'){var el=document.createElement('input');el.setAttribute('type',elementType);isSupported=el.type==='text';el=null};return isSupported};function resolveAlias(aliasStr,options,opts){var aliasDefinition=opts.aliases[aliasStr];if(aliasDefinition){if(aliasDefinition.alias)resolveAlias(aliasDefinition.alias,undefined,opts);$.extend(true,opts,aliasDefinition);$.extend(true,opts,options);return true}else if(opts.mask===null){opts.mask=aliasStr};return false};function importAttributeOptions(npt,opts,userOptions){var attrOptions=npt.getAttribute('data-inputmask'),option,dataoptions,optionData,p;function importOption(option,optionData){optionData=optionData!==undefined?optionData:npt.getAttribute('data-inputmask-'+option);if(optionData!==null){if(typeof optionData==='string'){if(option.indexOf('on')===0)optionData=window[optionData];else if(optionData==='false')optionData=false;else if(optionData==='true')optionData=true};userOptions[option]=optionData}};if(attrOptions&&attrOptions!==''){attrOptions=attrOptions.replace(new RegExp('\'','g'),'"');dataoptions=JSON.parse('{'+attrOptions+'}')};if(dataoptions){optionData=undefined;for(p in dataoptions){if(p.toLowerCase()==='alias'){optionData=dataoptions[p];break}}};importOption('alias',optionData);if(userOptions.alias){resolveAlias(userOptions.alias,userOptions,opts)};for(option in opts){if(dataoptions){optionData=undefined;for(p in dataoptions){if(p.toLowerCase()===option.toLowerCase()){optionData=dataoptions[p];break}}};importOption(option,optionData)};$.extend(true,opts,userOptions);return opts};function generateMaskSet(opts,nocache){var ms;function analyseMask(mask){var tokenizer=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,escaped=false,currentToken=new MaskToken(),match,m,openenings=[],maskTokens=[],openingToken,currentOpeningToken,alternator,lastMatch,groupToken;function MaskToken(isGroup,isOptional,isQuantifier,isAlternator){this.matches=[];this.isGroup=isGroup||false;this.isOptional=isOptional||false;this.isQuantifier=isQuantifier||false;this.isAlternator=isAlternator||false;this.quantifier={min:1,max:1}};function insertTestDefinition(mtoken,element,position){var maskdef=opts.definitions[element];position=position!==undefined?position:mtoken.matches.length;var prevMatch=mtoken.matches[position-1];if(maskdef&&!escaped){maskdef.placeholder=$.isFunction(maskdef.placeholder)?maskdef.placeholder(opts):maskdef.placeholder;var prevalidators=maskdef.prevalidator,prevalidatorsL=prevalidators?prevalidators.length:0;for(var i=1;i<maskdef.cardinality;i++){var prevalidator=prevalidatorsL>=i?prevalidators[i-1]:[],validator=prevalidator.validator,cardinality=prevalidator.cardinality;mtoken.matches.splice(position++,0,{fn:validator?typeof validator==='string'?new RegExp(validator):new function(){this.test=validator}:new RegExp('.'),cardinality:cardinality?cardinality:1,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,mask:element});prevMatch=mtoken.matches[position-1]};mtoken.matches.splice(position++,0,{fn:maskdef.validator?typeof maskdef.validator=='string'?new RegExp(maskdef.validator):new function(){this.test=maskdef.validator}:new RegExp('.'),cardinality:maskdef.cardinality,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,mask:element})}else{mtoken.matches.splice(position++,0,{fn:null,cardinality:0,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==element,casing:null,def:opts.staticDefinitionSymbol||element,placeholder:opts.staticDefinitionSymbol!==undefined?element:undefined,mask:element});escaped=false}};function verifyGroupMarker(lastMatch,isOpenGroup){if(lastMatch.isGroup){lastMatch.isGroup=false;insertTestDefinition(lastMatch,opts.groupmarker.start,0);if(isOpenGroup!==true){insertTestDefinition(lastMatch,opts.groupmarker.end)}}};function maskCurrentToken(m,currentToken,lastMatch,extraCondition){if(currentToken.matches.length>0&&(extraCondition===undefined||extraCondition)){lastMatch=currentToken.matches[currentToken.matches.length-1];verifyGroupMarker(lastMatch)};insertTestDefinition(currentToken,m)};function defaultCase(){if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];maskCurrentToken(m,currentOpeningToken,lastMatch,!currentOpeningToken.isAlternator);if(currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++){alternator.matches[mndx].isGroup=false};if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(alternator)}else{currentToken.matches.push(alternator)}}}else{maskCurrentToken(m,currentToken,lastMatch)}};function reverseTokens(maskToken){function reverseStatic(st){if(st===opts.optionalmarker.start)st=opts.optionalmarker.end;else if(st===opts.optionalmarker.end)st=opts.optionalmarker.start;else if(st===opts.groupmarker.start)st=opts.groupmarker.end;else if(st===opts.groupmarker.end)st=opts.groupmarker.start;return st};maskToken.matches=maskToken.matches.reverse();for(var match in maskToken.matches){var intMatch=parseInt(match);if(maskToken.matches[match].isQuantifier&&maskToken.matches[intMatch+1]&&maskToken.matches[intMatch+1].isGroup){var qt=maskToken.matches[match];maskToken.matches.splice(match,1);maskToken.matches.splice(intMatch+1,0,qt)};if(maskToken.matches[match].matches!==undefined){maskToken.matches[match]=reverseTokens(maskToken.matches[match])}else{maskToken.matches[match]=reverseStatic(maskToken.matches[match])}};return maskToken}while(match=tokenizer.exec(mask)){m=match[0];if(escaped){defaultCase();continue};switch(m.charAt(0)){case opts.escapeChar:escaped=true;break;case opts.optionalmarker.end:case opts.groupmarker.end:openingToken=openenings.pop();if(openingToken!==undefined){if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(openingToken);if(currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++){alternator.matches[mndx].isGroup=false};if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(alternator)}else{currentToken.matches.push(alternator)}}}else{currentToken.matches.push(openingToken)}}else defaultCase();break;case opts.optionalmarker.start:openenings.push(new MaskToken(false,true));break;case opts.groupmarker.start:openenings.push(new MaskToken(true));break;case opts.quantifiermarker.start:var quantifier=new MaskToken(false,false,true);m=m.replace(/[{}]/g,'');var mq=m.split(','),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=mq.length===1?mq0:(isNaN(mq[1])?mq[1]:parseInt(mq[1]));if(mq1==='*'||mq1==='+'){mq0=mq1==='*'?0:1};quantifier.quantifier={min:mq0,max:mq1};if(openenings.length>0){var matches=openenings[openenings.length-1].matches;match=matches.pop();if(!match.isGroup){groupToken=new MaskToken(true);groupToken.matches.push(match);match=groupToken};matches.push(match);matches.push(quantifier)}else{match=currentToken.matches.pop();if(!match.isGroup){groupToken=new MaskToken(true);groupToken.matches.push(match);match=groupToken};currentToken.matches.push(match);currentToken.matches.push(quantifier)};break;case opts.alternatormarker:if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];lastMatch=currentOpeningToken.matches.pop()}else{lastMatch=currentToken.matches.pop()};if(lastMatch.isAlternator){openenings.push(lastMatch)}else{alternator=new MaskToken(false,false,false,true);alternator.matches.push(lastMatch);openenings.push(alternator)};break;default:defaultCase()}}while(openenings.length>0){openingToken=openenings.pop();verifyGroupMarker(openingToken,true);currentToken.matches.push(openingToken)};if(currentToken.matches.length>0){lastMatch=currentToken.matches[currentToken.matches.length-1];verifyGroupMarker(lastMatch);maskTokens.push(currentToken)};if(opts.numericInput){reverseTokens(maskTokens[0])};return maskTokens};function generateMask(mask,metadata){if(mask===null||mask===''){return undefined}else{if(mask.length===1&&opts.greedy===false&&opts.repeat!==0){opts.placeholder=''};if(opts.repeat>0||opts.repeat==='*'||opts.repeat==='+'){var repeatStart=opts.repeat==='*'?0:(opts.repeat==='+'?1:opts.repeat);mask=opts.groupmarker.start+mask+opts.groupmarker.end+opts.quantifiermarker.start+repeatStart+','+opts.repeat+opts.quantifiermarker.end};var masksetDefinition;if(Inputmask.prototype.masksCache[mask]===undefined||nocache===true){masksetDefinition={'mask':mask,'maskToken':analyseMask(mask),'validPositions':{},'_buffer':undefined,'buffer':undefined,'tests':{},'metadata':metadata};if(nocache!==true){Inputmask.prototype.masksCache[opts.numericInput?mask.split('').reverse().join(''):mask]=masksetDefinition;masksetDefinition=$.extend(true,{},Inputmask.prototype.masksCache[opts.numericInput?mask.split('').reverse().join(''):mask])}}else masksetDefinition=$.extend(true,{},Inputmask.prototype.masksCache[opts.numericInput?mask.split('').reverse().join(''):mask]);return masksetDefinition}};function preProcessMask(mask){mask=mask.toString();return mask};if($.isFunction(opts.mask)){opts.mask=opts.mask(opts)};if($.isArray(opts.mask)){if(opts.mask.length>1){opts.keepStatic=opts.keepStatic===null?true:opts.keepStatic;var altMask='(';$.each(opts.numericInput?opts.mask.reverse():opts.mask,function(ndx,msk){if(altMask.length>1){altMask+=')|('};if(msk.mask!==undefined&&!$.isFunction(msk.mask)){altMask+=preProcessMask(msk.mask)}else{altMask+=preProcessMask(msk)}});altMask+=')';return generateMask(altMask,opts.mask)}else opts.mask=opts.mask.pop()};if(opts.mask){if(opts.mask.mask!==undefined&&!$.isFunction(opts.mask.mask)){ms=generateMask(preProcessMask(opts.mask.mask),opts.mask)}else{ms=generateMask(preProcessMask(opts.mask),opts.mask)}};return ms};var ua=navigator.userAgent,mobile=/mobile/i.test(ua),iemobile=/iemobile/i.test(ua),iphone=/iphone/i.test(ua)&&!iemobile;function maskScope(actionObj,maskset,opts){var isRTL=false,undoValue,el,$el,skipKeyPressEvent=false,skipInputEvent=false,ignorable=false,maxLength,mouseEnter=true;function getMaskTemplate(baseOnInput,minimalPos,includeInput){minimalPos=minimalPos||0;var maskTemplate=[],ndxIntlzr,pos=0,test,testPos,lvp=getLastValidPosition();maxLength=el!==undefined?el.maxLength:undefined;if(maxLength===-1)maxLength=undefined;do{if(baseOnInput===true&&getMaskSet().validPositions[pos]){var validPos=getMaskSet().validPositions[pos];test=validPos.match;ndxIntlzr=validPos.locator.slice();maskTemplate.push(includeInput===true?validPos.input:getPlaceholder(pos,test))}else{testPos=getTestTemplate(pos,ndxIntlzr,pos-1);test=testPos.match;ndxIntlzr=testPos.locator.slice();if(opts.jitMasking===false||pos<lvp||(isFinite(opts.jitMasking)&&opts.jitMasking>pos)){maskTemplate.push(getPlaceholder(pos,test))}};pos++}while((maxLength===undefined||pos<maxLength)&&(test.fn!==null||test.def!=='')||minimalPos>pos);if(maskTemplate[maskTemplate.length-1]===''){maskTemplate.pop()};getMaskSet().maskLength=pos+1;return maskTemplate};function getMaskSet(){return maskset};function resetMaskSet(soft){var maskset=getMaskSet();maskset.buffer=undefined;if(soft!==true){maskset._buffer=undefined;maskset.validPositions={};maskset.p=0}};function getLastValidPosition(closestTo,strict,validPositions){var before=-1,after=-1,valids=validPositions||getMaskSet().validPositions;if(closestTo===undefined)closestTo=-1;for(var posNdx in valids){var psNdx=parseInt(posNdx);if(valids[psNdx]&&(strict||valids[psNdx].match.fn!==null)){if(psNdx<=closestTo)before=psNdx;if(psNdx>=closestTo)after=psNdx}};return(before!==-1&&(closestTo-before)>1)||after<closestTo?before:after};function setValidPosition(pos,validTest,fromSetValid,isSelection){if(isSelection||(opts.insertMode&&getMaskSet().validPositions[pos]!==undefined&&fromSetValid===undefined)){var positionsClone=$.extend(true,{},getMaskSet().validPositions),lvp=getLastValidPosition(),i;for(i=pos;i<=lvp;i++){delete getMaskSet().validPositions[i]};getMaskSet().validPositions[pos]=validTest;var valid=true,j,vps=getMaskSet().validPositions,needsValidation=false;for(i=(j=pos);i<=lvp;i++){var t=positionsClone[i];if(t!==undefined){var posMatch=j,prevPosMatch=-1;while(posMatch<getMaskSet().maskLength&&((t.match.fn==null&&vps[i]&&(vps[i].match.optionalQuantifier===true||vps[i].match.optionality===true))||t.match.fn!=null)){if(t.match.fn===null||(!opts.keepStatic&&vps[i]&&(vps[i+1]!==undefined&&getTests(i+1,vps[i].locator.slice(),i).length>1||vps[i].alternation!==undefined))){posMatch++}else posMatch=seekNext(j);if(needsValidation===false&&positionsClone[posMatch]&&positionsClone[posMatch].match.def===t.match.def){getMaskSet().validPositions[posMatch]=$.extend(true,{},positionsClone[posMatch]);getMaskSet().validPositions[posMatch].input=t.input;j=posMatch;valid=true;break}else if(positionCanMatchDefinition(posMatch,t.match.def)){var result=isValid(posMatch,t.input,true,true);valid=result!==false;j=(result.caret||result.insert)?getLastValidPosition():posMatch;needsValidation=true;if(valid)break}else{valid=t.match.fn==null;if(prevPosMatch===posMatch)break;prevPosMatch=posMatch}}};if(!valid)break};if(!valid){getMaskSet().validPositions=$.extend(true,{},positionsClone);resetMaskSet(true);return false}}else getMaskSet().validPositions[pos]=validTest;resetMaskSet(true);return true};function stripValidPositions(start,end,nocheck,strict){function IsEnclosedStatic(pos){var posMatch=getMaskSet().validPositions[pos];if(posMatch!==undefined&&posMatch.match.fn===null){var prevMatch=getMaskSet().validPositions[pos-1],nextMatch=getMaskSet().validPositions[pos+1];return prevMatch!==undefined&&nextMatch!==undefined};return false};var i,startPos=start,positionsClone=$.extend(true,{},getMaskSet().validPositions),needsValidation=false;getMaskSet().p=start;for(i=end-1;i>=startPos;i--){if(getMaskSet().validPositions[i]!==undefined){if(nocheck===true||(!IsEnclosedStatic(i)&&opts.canClearPosition(getMaskSet(),i,getLastValidPosition(),strict,opts)!==false)){delete getMaskSet().validPositions[i]}}};resetMaskSet(true);for(i=startPos+1;i<=getLastValidPosition();){while(getMaskSet().validPositions[startPos]!==undefined)startPos++;var s=getMaskSet().validPositions[startPos];if(i<startPos)i=startPos+1;if((getMaskSet().validPositions[i]!==undefined||!isMask(i))&&s===undefined){var t=getTestTemplate(i);if(needsValidation===false&&positionsClone[startPos]&&positionsClone[startPos].match.def===t.match.def){getMaskSet().validPositions[startPos]=$.extend(true,{},positionsClone[startPos]);getMaskSet().validPositions[startPos].input=t.input;delete getMaskSet().validPositions[i];i++}else if(positionCanMatchDefinition(startPos,t.match.def)){if(isValid(startPos,t.input||getPlaceholder(i),true)!==false){delete getMaskSet().validPositions[i];i++;needsValidation=true}}else if(!isMask(i)){i++;startPos--};startPos++}else i++};resetMaskSet(true)};function determineTestTemplate(tests,ignoreGreedy){var testPos,testPositions=tests,lvp=getLastValidPosition(),lvTest=getMaskSet().validPositions[lvp]||getTests(0)[0],lvTestAltArr=(lvTest.alternation!==undefined)?lvTest.locator[lvTest.alternation].toString().split(','):[];for(var ndx=0;ndx<testPositions.length;ndx++){testPos=testPositions[ndx];if(testPos.match&&((((opts.greedy||ignoreGreedy)&&testPos.match.optionalQuantifier!==true)||(testPos.match.optionality===false||testPos.match.newBlockMarker===false)&&testPos.match.optionalQuantifier!==true)&&((lvTest.alternation===undefined||lvTest.alternation!==testPos.alternation)||(testPos.locator[lvTest.alternation]!==undefined&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(','),lvTestAltArr))))){break}};return testPos};function getTestTemplate(pos,ndxIntlzr,tstPs){return getMaskSet().validPositions[pos]||determineTestTemplate(getTests(pos,ndxIntlzr?ndxIntlzr.slice():ndxIntlzr,tstPs))};function getTest(pos){if(getMaskSet().validPositions[pos]){return getMaskSet().validPositions[pos]};return getTests(pos)[0]};function positionCanMatchDefinition(pos,def){var valid=false,tests=getTests(pos);for(var tndx=0;tndx<tests.length;tndx++){if(tests[tndx].match&&tests[tndx].match.def===def){valid=true;break}};return valid};function selectBestMatch(pos,alternateNdx){var bestMatch,indexPos;if(getMaskSet().tests[pos]||getMaskSet().validPositions[pos]){$.each(getMaskSet().tests[pos]||[getMaskSet().validPositions[pos]],function(ndx,lmnt){var ndxPos=lmnt.alternation?lmnt.locator[lmnt.alternation].toString().indexOf(alternateNdx):-1;if((indexPos===undefined||ndxPos<indexPos)&&ndxPos!==-1){bestMatch=lmnt;indexPos=ndxPos}})};return bestMatch};function getTests(pos,ndxIntlzr,tstPs){var maskTokens=getMaskSet().maskToken,testPos=ndxIntlzr?tstPs:0,ndxInitializer=ndxIntlzr?ndxIntlzr.slice():[0],matches=[],insertStop=false,latestMatch,cacheDependency=ndxIntlzr?ndxIntlzr.join(''):'';function resolveTestFromToken(maskToken,ndxInitializer,loopNdx,quantifierRecurse){function handleMatch(match,loopNdx,quantifierRecurse){function isFirstMatch(latestMatch,tokenGroup){var firstMatch=$.inArray(latestMatch,tokenGroup.matches)===0;if(!firstMatch){$.each(tokenGroup.matches,function(ndx,match){if(match.isQuantifier===true){firstMatch=isFirstMatch(latestMatch,tokenGroup.matches[ndx-1]);if(firstMatch)return false}})};return firstMatch};function resolveNdxInitializer(pos,alternateNdx){var bestMatch=selectBestMatch(pos,alternateNdx);return bestMatch?bestMatch.locator.slice(bestMatch.alternation+1):[]};if(testPos>10000){throw'Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. '+getMaskSet().mask;};if(testPos===pos&&match.matches===undefined){matches.push({'match':match,'locator':loopNdx.reverse(),'cd':cacheDependency});return true}else if(match.matches!==undefined){if(match.isGroup&&quantifierRecurse!==match){match=handleMatch(maskToken.matches[$.inArray(match,maskToken.matches)+1],loopNdx);if(match)return true}else if(match.isOptional){var optionalToken=match;match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse);if(match){latestMatch=matches[matches.length-1].match;if(isFirstMatch(latestMatch,optionalToken)){insertStop=true;testPos=pos}else return true}}else if(match.isAlternator){var alternateToken=match,malternateMatches=[],maltMatches,currentMatches=matches.slice(),loopNdxCnt=loopNdx.length,altIndex=ndxInitializer.length>0?ndxInitializer.shift():-1;if(altIndex===-1||typeof altIndex==='string'){var currentPos=testPos,ndxInitializerClone=ndxInitializer.slice(),altIndexArr=[],amndx;if(typeof altIndex=='string'){altIndexArr=altIndex.split(',')}else{for(amndx=0;amndx<alternateToken.matches.length;amndx++){altIndexArr.push(amndx)}};for(var ndx=0;ndx<altIndexArr.length;ndx++){amndx=parseInt(altIndexArr[ndx]);matches=[];ndxInitializer=resolveNdxInitializer(testPos,amndx);match=handleMatch(alternateToken.matches[amndx]||maskToken.matches[amndx],[amndx].concat(loopNdx),quantifierRecurse)||match;if(match!==true&&match!==undefined&&(altIndexArr[altIndexArr.length-1]<alternateToken.matches.length)){var ntndx=$.inArray(match,maskToken.matches)+1;if(maskToken.matches.length>ntndx){match=handleMatch(maskToken.matches[ntndx],[ntndx].concat(loopNdx.slice(1,loopNdx.length)),quantifierRecurse);if(match){altIndexArr.push(ntndx.toString());$.each(matches,function(ndx,lmnt){lmnt.alternation=loopNdx.length-1})}}};maltMatches=matches.slice();testPos=currentPos;matches=[];for(var i=0;i<ndxInitializerClone.length;i++){ndxInitializer[i]=ndxInitializerClone[i]};for(var ndx1=0;ndx1<maltMatches.length;ndx1++){var altMatch=maltMatches[ndx1],hasMatch=false;altMatch.alternation=altMatch.alternation||loopNdxCnt;for(var ndx2=0;ndx2<malternateMatches.length;ndx2++){var altMatch2=malternateMatches[ndx2];if(altMatch.match.def===altMatch2.match.def&&(typeof altIndex!=='string'||$.inArray(altMatch.locator[altMatch.alternation].toString(),altIndexArr)!==-1)){hasMatch=altMatch.match.mask===altMatch2.match.mask;if(altMatch2.locator[altMatch.alternation].toString().indexOf(altMatch.locator[altMatch.alternation])===-1){altMatch2.locator[altMatch.alternation]=altMatch2.locator[altMatch.alternation]+','+altMatch.locator[altMatch.alternation];altMatch2.alternation=altMatch.alternation};break}};if(!hasMatch){malternateMatches.push(altMatch)}}};if(typeof altIndex=='string'){malternateMatches=$.map(malternateMatches,function(lmnt,ndx){if(isFinite(ndx)){var mamatch,alternation=lmnt.alternation,altLocArr=lmnt.locator[alternation].toString().split(',');lmnt.locator[alternation]=undefined;lmnt.alternation=undefined;for(var alndx=0;alndx<altLocArr.length;alndx++){mamatch=$.inArray(altLocArr[alndx],altIndexArr)!==-1;if(mamatch){if(lmnt.locator[alternation]!==undefined){lmnt.locator[alternation]+=',';lmnt.locator[alternation]+=altLocArr[alndx]}else lmnt.locator[alternation]=parseInt(altLocArr[alndx]);lmnt.alternation=alternation}};if(lmnt.locator[alternation]!==undefined)return lmnt}})};matches=currentMatches.concat(malternateMatches);testPos=pos;insertStop=matches.length>0}else{match=handleMatch(alternateToken.matches[altIndex]||maskToken.matches[altIndex],[altIndex].concat(loopNdx),quantifierRecurse)};if(match)return true}else if(match.isQuantifier&&quantifierRecurse!==maskToken.matches[$.inArray(match,maskToken.matches)-1]){var qt=match;for(var qndx=(ndxInitializer.length>0)?ndxInitializer.shift():0;(qndx<(isNaN(qt.quantifier.max)?qndx+1:qt.quantifier.max))&&testPos<=pos;qndx++){var tokenGroup=maskToken.matches[$.inArray(qt,maskToken.matches)-1];match=handleMatch(tokenGroup,[qndx].concat(loopNdx),tokenGroup);if(match){latestMatch=matches[matches.length-1].match;latestMatch.optionalQuantifier=qndx>(qt.quantifier.min-1);if(isFirstMatch(latestMatch,tokenGroup)){if(qndx>(qt.quantifier.min-1)){insertStop=true;testPos=pos;break}else return true}else{return true}}}}else{match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse);if(match)return true}}else testPos++};for(var tndx=(ndxInitializer.length>0?ndxInitializer.shift():0);tndx<maskToken.matches.length;tndx++){if(maskToken.matches[tndx].isQuantifier!==true){var match=handleMatch(maskToken.matches[tndx],[tndx].concat(loopNdx),quantifierRecurse);if(match&&testPos===pos){return match}else if(testPos>pos){break}}}};function mergeLocators(tests){var locator=[];if(!$.isArray(tests))tests=[tests];if(tests.length>0){if(tests[0].alternation===undefined){locator=determineTestTemplate(tests.slice()).locator.slice();if(locator.length===0)locator=tests[0].locator.slice()}else{$.each(tests,function(ndx,tst){if(tst.def!==''){if(locator.length===0)locator=tst.locator.slice();else{for(var i=0;i<locator.length;i++){if(tst.locator[i]&&locator[i].toString().indexOf(tst.locator[i])===-1){locator[i]+=','+tst.locator[i]}}}}})}};return locator};function filterTests(tests){if(false&&ndxIntlzr!==undefined){var temp=$.map(tests,function(test){var match=true;for(var i=0,ndxtl=tests.length,ndxil=ndxIntlzr?ndxIntlzr.length:0;i<ndxil;i++){if((typeof test.locator[i]==='string'&&!checkAlternationMatch(test.locator[i].split(','),ndxIntlzr[i].toString().split(',')))||(typeof test.locator[i]!=='string'&&(test.locator[i]<ndxIntlzr[i]&&(i!==ndxil-1||i!==ndxtl-1)))){match=false;break}};if(match){return test}});if(temp.length==0){console.log(JSON.stringify(tests))};return temp};return tests};if(pos>-1){if(ndxIntlzr===undefined){var previousPos=pos-1,test;while((test=getMaskSet().validPositions[previousPos]||getMaskSet().tests[previousPos])===undefined&&previousPos>-1){previousPos--};if(test!==undefined&&previousPos>-1){ndxInitializer=mergeLocators(test);cacheDependency=ndxInitializer.join('');testPos=previousPos}};if(getMaskSet().tests[pos]&&getMaskSet().tests[pos][0].cd===cacheDependency){return filterTests(getMaskSet().tests[pos])}else{};for(var mtndx=ndxInitializer.shift();mtndx<maskTokens.length;mtndx++){var match=resolveTestFromToken(maskTokens[mtndx],ndxInitializer,[mtndx]);if((match&&testPos===pos)||testPos>pos){break}}};if(matches.length===0||insertStop){matches.push({match:{fn:null,cardinality:0,optionality:true,casing:null,def:'',placeholder:''},locator:[],cd:cacheDependency})};if(ndxIntlzr!==undefined&&getMaskSet().tests[pos]){return $.extend(true,[],matches)};getMaskSet().tests[pos]=$.extend(true,[],matches);return getMaskSet().tests[pos]};function getBufferTemplate(){if(getMaskSet()._buffer===undefined){getMaskSet()._buffer=getMaskTemplate(false,1);if(getMaskSet().buffer===undefined){getMaskSet()._buffer.slice()}};return getMaskSet()._buffer};function getBuffer(noCache){if(getMaskSet().buffer===undefined||noCache===true){getMaskSet().buffer=getMaskTemplate(true,getLastValidPosition(),true)};return getMaskSet().buffer};function refreshFromBuffer(start,end,buffer){var i;if(start===true){resetMaskSet();start=0;end=buffer.length}else{for(i=start;i<end;i++){delete getMaskSet().validPositions[i]}};for(i=start;i<end;i++){resetMaskSet(true);if(buffer[i]!==opts.skipOptionalPartCharacter){isValid(i,buffer[i],true,true)}}};function casing(elem,test,pos){switch(test.casing){case'upper':elem=elem.toUpperCase();break;case'lower':elem=elem.toLowerCase();break;case'title':var posBefore=getMaskSet().validPositions[pos-1];if(pos===0||posBefore&&posBefore.input===String.fromCharCode(Inputmask.keyCode.SPACE)){elem=elem.toUpperCase()}else{elem=elem.toLowerCase()};break};return elem};function checkAlternationMatch(altArr1,altArr2){var altArrC=opts.greedy?altArr2:altArr2.slice(0,1),isMatch=false;for(var alndx=0;alndx<altArr1.length;alndx++){if($.inArray(altArr1[alndx],altArrC)!==-1){isMatch=true;break}};return isMatch};function isValid(pos,c,strict,fromSetValid){function isSelection(posObj){return isRTL?(posObj.begin-posObj.end)>1||((posObj.begin-posObj.end)===1&&opts.insertMode):(posObj.end-posObj.begin)>1||((posObj.end-posObj.begin)===1&&opts.insertMode)};strict=strict===true;var maskPos=pos;if(pos.begin!==undefined){maskPos=isRTL&&!isSelection(pos)?pos.end:pos.begin};function _isValid(position,c,strict,fromSetValid){var rslt=false;$.each(getTests(position),function(ndx,tst){var test=tst.match,loopend=c?1:0,chrs='';for(var i=test.cardinality;i>loopend;i--){chrs+=getBufferElement(position-(i-1))};if(c){chrs+=c};getBuffer(true);rslt=test.fn!=null?test.fn.test(chrs,getMaskSet(),position,strict,opts,isSelection(pos)):(c===test.def||c===opts.skipOptionalPartCharacter)&&test.def!==''?{c:test.placeholder||test.def,pos:position}:false;if(rslt!==false){var elem=rslt.c!==undefined?rslt.c:c;elem=(elem===opts.skipOptionalPartCharacter&&test.fn===null)?(test.placeholder||test.def):elem;var validatedPos=position,possibleModifiedBuffer=getBuffer();if(rslt.remove!==undefined){if(!$.isArray(rslt.remove))rslt.remove=[rslt.remove];$.each(rslt.remove.sort(function(a,b){return b-a}),function(ndx,lmnt){stripValidPositions(lmnt,lmnt+1,true)})};if(rslt.insert!==undefined){if(!$.isArray(rslt.insert))rslt.insert=[rslt.insert];$.each(rslt.insert.sort(function(a,b){return a-b}),function(ndx,lmnt){isValid(lmnt.pos,lmnt.c,false,fromSetValid)})};if(rslt.refreshFromBuffer){var refresh=rslt.refreshFromBuffer;strict=true;refreshFromBuffer(refresh===true?refresh:refresh.start,refresh.end,possibleModifiedBuffer);if(rslt.pos===undefined&&rslt.c===undefined){rslt.pos=getLastValidPosition();return false};validatedPos=rslt.pos!==undefined?rslt.pos:position;if(validatedPos!==position){rslt=$.extend(rslt,isValid(validatedPos,elem,true,fromSetValid));return false}}else if(rslt!==true&&rslt.pos!==undefined&&rslt.pos!==position){validatedPos=rslt.pos;refreshFromBuffer(position,validatedPos,getBuffer().slice());if(validatedPos!==position){rslt=$.extend(rslt,isValid(validatedPos,elem,true));return false}};if(rslt!==true&&rslt.pos===undefined&&rslt.c===undefined){return false};if(ndx>0){resetMaskSet(true)};if(!setValidPosition(validatedPos,$.extend({},tst,{'input':casing(elem,test,validatedPos)}),fromSetValid,isSelection(pos))){rslt=false};return false}});return rslt};function alternate(pos,c,strict,fromSetValid){var validPsClone=$.extend(true,{},getMaskSet().validPositions),lastAlt,alternation,isValidRslt,altPos,i,validPos;for(var lAlt=getLastValidPosition();lAlt>=0;lAlt--){altPos=getMaskSet().validPositions[lAlt];if(altPos&&altPos.alternation!==undefined){lastAlt=lAlt;alternation=getMaskSet().validPositions[lastAlt].alternation;if(getTestTemplate(lastAlt).locator[altPos.alternation]!==altPos.locator[altPos.alternation]){break}}};if(alternation!==undefined){lastAlt=parseInt(lastAlt);for(var decisionPos in getMaskSet().validPositions){decisionPos=parseInt(decisionPos);altPos=getMaskSet().validPositions[decisionPos];if(decisionPos>=lastAlt&&altPos.alternation!==undefined){var altNdxs;if(lastAlt===0){altNdxs=[];$.each(getMaskSet().tests[lastAlt],function(ndx,test){if(test.locator[alternation]!==undefined){altNdxs=altNdxs.concat(test.locator[alternation].toString().split(','))}})}else{altNdxs=getMaskSet().validPositions[lastAlt].locator[alternation].toString().split(',')};var decisionTaker=altPos.locator[alternation]!==undefined?altPos.locator[alternation]:altNdxs[0];if(decisionTaker.length>0){decisionTaker=decisionTaker.split(',')[0]};for(var mndx=0;mndx<altNdxs.length;mndx++){var validInputs=[],staticInputsBeforePos=0,staticInputsBeforePosAlternate=0;if(decisionTaker<altNdxs[mndx]){var possibilityPos,possibilities;for(var dp=decisionPos;dp>=0;dp--){possibilityPos=getMaskSet().validPositions[dp];if(possibilityPos!==undefined){var bestMatch=selectBestMatch(dp,altNdxs[mndx]);if(getMaskSet().validPositions[dp].match.def!==bestMatch.match.def){if(getMaskSet().validPositions[dp].generatedInput!==true){validInputs.push(getMaskSet().validPositions[dp].input)};getMaskSet().validPositions[dp]=bestMatch;getMaskSet().validPositions[dp].input=getPlaceholder(dp);if(getMaskSet().validPositions[dp].match.fn===null){staticInputsBeforePosAlternate++};possibilityPos=bestMatch};possibilities=possibilityPos.locator[alternation];possibilityPos.locator[alternation]=parseInt(altNdxs[mndx]);break}};if(decisionTaker!==possibilityPos.locator[alternation]){for(i=decisionPos+1;i<getLastValidPosition(undefined,true)+1;i++){validPos=getMaskSet().validPositions[i];if(validPos&&validPos.match.fn!=null){validInputs.push(validPos.input)}else if(i<pos)staticInputsBeforePos++;delete getMaskSet().validPositions[i]};resetMaskSet(true);opts.keepStatic=!opts.keepStatic;isValidRslt=true;while(validInputs.length>0){var input=validInputs.shift();if(input!==opts.skipOptionalPartCharacter){if(!(isValidRslt=isValid(getLastValidPosition(undefined,true)+1,input,false,fromSetValid))){break}}};possibilityPos.alternation=alternation;possibilityPos.locator[alternation]=possibilities;if(isValidRslt){var targetLvp=getLastValidPosition(pos)+1;for(i=decisionPos+1;i<getLastValidPosition()+1;i++){validPos=getMaskSet().validPositions[i];if((validPos===undefined||validPos.match.fn==null)&&i<pos){staticInputsBeforePosAlternate++}};pos=pos+(staticInputsBeforePosAlternate-staticInputsBeforePos);isValidRslt=isValid(pos>targetLvp?targetLvp:pos,c,strict,fromSetValid)};opts.keepStatic=!opts.keepStatic;if(!isValidRslt){resetMaskSet();getMaskSet().validPositions=$.extend(true,{},validPsClone)}else return isValidRslt}}};break}}};return false};function trackbackAlternations(originalPos,newPos){var vp=getMaskSet().validPositions[newPos],targetLocator=vp.locator,tll=targetLocator.length;for(var ps=originalPos;ps<newPos;ps++){if(getMaskSet().validPositions[ps]===undefined&&!isMask(ps,true)){var tests=getTests(ps),bestMatch=tests[0],equality=-1;$.each(tests,function(ndx,tst){for(var i=0;i<tll;i++){if(tst.locator[i]!==undefined&&checkAlternationMatch(tst.locator[i].toString().split(','),targetLocator[i].toString().split(','))){if(equality<i){equality=i;bestMatch=tst}}else break}});setValidPosition(ps,$.extend({},bestMatch,{'input':bestMatch.match.placeholder||bestMatch.match.def}),true)}}};var result=false,positionsClone=$.extend(true,{},getMaskSet().validPositions);for(var pndx=maskPos-1;pndx>-1;pndx--){if(getMaskSet().validPositions[pndx])break};var testTemplate,generatedPos;for(pndx++;pndx<maskPos;pndx++){if(getMaskSet().validPositions[pndx]===undefined&&(opts.jitMasking===false||opts.jitMasking>pndx)&&((testTemplate=getTestTemplate(pndx,getTestTemplate(pndx-1).locator,pndx-1)).match.def===opts.radixPointDefinitionSymbol||!isMask(pndx,true)||($.inArray(opts.radixPoint,getBuffer())<pndx&&testTemplate.match.fn&&testTemplate.match.fn.test(getPlaceholder(pndx),getMaskSet(),pndx,false,opts)))){result=_isValid(pndx,testTemplate.match.placeholder||(testTemplate.match.fn==null?testTemplate.match.def:(getPlaceholder(pndx)!==''?getPlaceholder(pndx):getBuffer()[pndx])),true,fromSetValid);if(result!==false){getMaskSet().validPositions[result.pos||pndx].generatedInput=true}}};if(isSelection(pos)){handleRemove(undefined,Inputmask.keyCode.DELETE,pos);maskPos=getMaskSet().p};if(maskPos<getMaskSet().maskLength){result=_isValid(maskPos,c,strict,fromSetValid);if((!strict||fromSetValid===true)&&result===false){var currentPosValid=getMaskSet().validPositions[maskPos];if(currentPosValid&&currentPosValid.match.fn===null&&(currentPosValid.match.def===c||c===opts.skipOptionalPartCharacter)){result={'caret':seekNext(maskPos)}}else if((opts.insertMode||getMaskSet().validPositions[seekNext(maskPos)]===undefined)&&!isMask(maskPos,true)){var testsFromPos=getTests(maskPos).slice();if(testsFromPos[testsFromPos.length-1].match.def==='')testsFromPos.pop();var staticChar=determineTestTemplate(testsFromPos,true);if(staticChar){staticChar=staticChar.match.placeholder||staticChar.match.def;_isValid(maskPos,staticChar,strict,fromSetValid)};for(var nPos=maskPos+1,snPos=seekNext(maskPos);nPos<=snPos;nPos++){result=_isValid(nPos,c,strict,fromSetValid);if(result!==false){trackbackAlternations(maskPos,nPos);maskPos=nPos;break}}}}};if(result===false&&opts.keepStatic){result=alternate(maskPos,c,strict,fromSetValid)};if(result===true){result={'pos':maskPos}};if($.isFunction(opts.postValidation)&&result!==false&&!strict&&fromSetValid!==true){result=opts.postValidation(getBuffer(true),result,opts)?result:false};if(result.pos===undefined){result.pos=maskPos};if(result===false){resetMaskSet(true);getMaskSet().validPositions=$.extend(true,{},positionsClone)};return result};function isMask(pos,strict){var test;if(strict){test=getTestTemplate(pos).match;if(test.def==='')test=getTest(pos).match}else test=getTest(pos).match;if(test.fn!=null){return test.fn}else if(strict!==true&&pos>-1&&!opts.keepStatic&&getMaskSet().validPositions[pos]===undefined){var tests=getTests(pos);return tests.length>2};return false};function seekNext(pos,newBlock){var maskL=getMaskSet().maskLength;if(pos>=maskL)return maskL;var position=pos;while(++position<maskL&&((newBlock===true&&(getTest(position).match.newBlockMarker!==true||!isMask(position)))||(newBlock!==true&&!isMask(position)))){};return position};function seekPrevious(pos,newBlock){var position=pos;if(position<=0)return 0;while(--position>0&&((newBlock===true&&getTest(position).match.newBlockMarker!==true)||(newBlock!==true&&!isMask(position)&&getTests(position).length<2))){};return position};function getBufferElement(position){return getMaskSet().validPositions[position]===undefined?getPlaceholder(position):getMaskSet().validPositions[position].input};function writeBuffer(input,buffer,caretPos,event,triggerInputEvent){if(event&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite(event,buffer,caretPos,opts);if(result){if(result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(refresh===true?refresh:refresh.start,refresh.end,result.buffer||buffer);buffer=getBuffer(true)};if(caretPos!==undefined)caretPos=result.caret!==undefined?result.caret:caretPos}};input.inputmask._valueSet(buffer.join(''));if(caretPos!==undefined&&(event===undefined||event.type!=='blur')){caret(input,caretPos)};if(triggerInputEvent===true){skipInputEvent=true;$(input).trigger('input')}};function getPlaceholder(pos,test){test=test||getTest(pos).match;if(test.placeholder!==undefined){return test.placeholder}else if(test.fn===null){if(pos>-1&&!opts.keepStatic&&getMaskSet().validPositions[pos]===undefined){var tests=getTests(pos),staticAlternations=[],prevTest;if(tests.length>2){for(var i=0;i<tests.length;i++){if(tests[i].match.optionality!==true&&tests[i].match.optionalQuantifier!==true&&(tests[i].match.fn===null||(prevTest===undefined||tests[i].match.fn.test(prevTest.match.def,getMaskSet(),pos,true,opts)!==false))){staticAlternations.push(tests[i]);if(tests[i].match.fn===null)prevTest=tests[i];if(staticAlternations.length>1){if(new RegExp('[0-9a-bA-Z]').test(staticAlternations[0].match.def)){return opts.placeholder.charAt(pos%opts.placeholder.length)}}}}}};return test.def};return opts.placeholder.charAt(pos%opts.placeholder.length)};function checkVal(input,writeOut,strict,nptvl){var inputValue=nptvl.slice(),charCodes='',initialNdx=0,result;function isTemplateMatch(){var isMatch=false,charCodeNdx=getBufferTemplate().slice(initialNdx,seekNext(initialNdx)).join('').indexOf(charCodes);if(charCodeNdx!==-1&&!isMask(initialNdx)){isMatch=true;var bufferTemplateArr=getBufferTemplate().slice(initialNdx,initialNdx+charCodeNdx);for(var i=0;i<bufferTemplateArr.length;i++){if(bufferTemplateArr[i]!==' '){isMatch=false;break}}};return isMatch};resetMaskSet();getMaskSet().p=seekNext(-1);if(!strict){if(opts.autoUnmask!==true){var staticInput=getBufferTemplate().slice(0,seekNext(-1)).join(''),matches=inputValue.join('').match(new RegExp('^'+Inputmask.escapeRegex(staticInput),'g'));if(matches&&matches.length>0){inputValue.splice(0,matches.length*staticInput.length);initialNdx=seekNext(initialNdx)}}else{initialNdx=seekNext(initialNdx)}};$.each(inputValue,function(ndx,charCode){if(charCode!==undefined){var keypress=new $.Event('keypress');keypress.which=charCode.charCodeAt(0);charCodes+=charCode;var lvp=getLastValidPosition(undefined,true),lvTest=getMaskSet().validPositions[lvp],nextTest=getTestTemplate(lvp+1,lvTest?lvTest.locator.slice():undefined,lvp);if(!isTemplateMatch()||strict||opts.autoUnmask){var pos=strict?ndx:(nextTest.match.fn==null&&nextTest.match.optionality&&(lvp+1)<getMaskSet().p?lvp+1:getMaskSet().p);result=keypressEvent.call(input,keypress,true,false,strict,pos);initialNdx=pos+1;charCodes=''}else{result=keypressEvent.call(input,keypress,true,false,true,lvp+1)};if(!strict&&$.isFunction(opts.onBeforeWrite)){result=opts.onBeforeWrite(keypress,getBuffer(),result.forwardPosition,opts);if(result&&result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(refresh===true?refresh:refresh.start,refresh.end,result.buffer);resetMaskSet(true);if(result.caret){getMaskSet().p=result.caret}}}}});if(writeOut){writeBuffer(input,getBuffer(),document.activeElement===input?seekNext(getLastValidPosition(0)):undefined,new $.Event('checkval'))}};function unmaskedvalue(input){if(input&&input.inputmask===undefined){return input.value};var umValue=[],vps=getMaskSet().validPositions;for(var pndx in vps){if(vps[pndx].match&&vps[pndx].match.fn!=null){umValue.push(vps[pndx].input)}};var unmaskedValue=umValue.length===0?'':(isRTL?umValue.reverse():umValue).join('');if($.isFunction(opts.onUnMask)){var bufferValue=(isRTL?getBuffer().slice().reverse():getBuffer()).join('');unmaskedValue=(opts.onUnMask(bufferValue,unmaskedValue,opts)||unmaskedValue)};return unmaskedValue};function caret(input,begin,end,notranslate){function translatePosition(pos){if(notranslate!==true&&isRTL&&typeof pos==='number'&&(!opts.greedy||opts.placeholder!=='')){var bffrLght=getBuffer().join('').length;pos=bffrLght-pos};return pos};var range;if(typeof begin==='number'){begin=translatePosition(begin);end=translatePosition(end);end=(typeof end=='number')?end:begin;var scrollCalc=parseInt(((input.ownerDocument.defaultView||window).getComputedStyle?(input.ownerDocument.defaultView||window).getComputedStyle(input,null):input.currentStyle).fontSize)*end;input.scrollLeft=scrollCalc>input.scrollWidth?scrollCalc:0;if(!mobile&&opts.insertMode===false&&begin===end)end++;if(input.setSelectionRange){input.selectionStart=begin;input.selectionEnd=end}else if(window.getSelection){range=document.createRange();if(input.firstChild===undefined||input.firstChild===null){var textNode=document.createTextNode('');input.appendChild(textNode)};range.setStart(input.firstChild,begin<input.inputmask._valueGet().length?begin:input.inputmask._valueGet().length);range.setEnd(input.firstChild,end<input.inputmask._valueGet().length?end:input.inputmask._valueGet().length);range.collapse(true);var sel=window.getSelection();sel.removeAllRanges();sel.addRange(range)}else if(input.createTextRange){range=input.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select()}}else{if(input.setSelectionRange){begin=input.selectionStart;end=input.selectionEnd}else if(window.getSelection){range=window.getSelection().getRangeAt(0);if(range.commonAncestorContainer.parentNode===input||range.commonAncestorContainer===input){begin=range.startOffset;end=range.endOffset}}else if(document.selection&&document.selection.createRange){range=document.selection.createRange();begin=0-range.duplicate().moveStart('character',-input.inputmask._valueGet().length);end=begin+range.text.length};return{'begin':translatePosition(begin),'end':translatePosition(end)}}};function determineLastRequiredPosition(returnDefinition){var buffer=getBuffer(),bl=buffer.length,pos,lvp=getLastValidPosition(),positions={},lvTest=getMaskSet().validPositions[lvp],ndxIntlzr=lvTest!==undefined?lvTest.locator.slice():undefined,testPos;for(pos=lvp+1;pos<buffer.length;pos++){testPos=getTestTemplate(pos,ndxIntlzr,pos-1);ndxIntlzr=testPos.locator.slice();positions[pos]=$.extend(true,{},testPos)};var lvTestAlt=lvTest&&lvTest.alternation!==undefined?lvTest.locator[lvTest.alternation]:undefined;for(pos=bl-1;pos>lvp;pos--){testPos=positions[pos];if((testPos.match.optionality||testPos.match.optionalQuantifier||(lvTestAlt&&((lvTestAlt!==positions[pos].locator[lvTest.alternation]&&testPos.match.fn!=null)||(testPos.match.fn===null&&testPos.locator[lvTest.alternation]&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(','),lvTestAlt.toString().split(','))&&getTests(pos)[0].def!==''))))&&buffer[pos]===getPlaceholder(pos,testPos.match)){bl--}else break};return returnDefinition?{'l':bl,'def':positions[bl]?positions[bl].match:undefined}:bl};function clearOptionalTail(buffer){var rl=determineLastRequiredPosition(),lmib=buffer.length-1;for(;lmib>rl;lmib--){if(isMask(lmib))break};buffer.splice(rl,lmib+1-rl);return buffer};function isComplete(buffer){if($.isFunction(opts.isComplete))return opts.isComplete(buffer,opts);if(opts.repeat==='*')return undefined;var complete=false,lrp=determineLastRequiredPosition(true),aml=seekPrevious(lrp.l);if(lrp.def===undefined||lrp.def.newBlockMarker||lrp.def.optionality||lrp.def.optionalQuantifier){complete=true;for(var i=0;i<=aml;i++){var test=getTestTemplate(i).match;if((test.fn!==null&&getMaskSet().validPositions[i]===undefined&&test.optionality!==true&&test.optionalQuantifier!==true)||(test.fn===null&&buffer[i]!==getPlaceholder(i,test))){complete=false;break}}};return complete};var EventRuler={on:function(input,eventName,eventHandler){var ev=function(e){if(this.inputmask===undefined&&this.nodeName!=='FORM'){var imOpts=$.data(this,'_inputmask_opts');if(imOpts)(new Inputmask(imOpts)).mask(this);else EventRuler.off(this)}else if(e.type!=='setvalue'&&(this.disabled||(this.readOnly&&!(e.type==='keydown'&&(e.ctrlKey&&e.keyCode===67)||(opts.tabThrough===false&&e.keyCode===Inputmask.keyCode.TAB))))){e.preventDefault()}else{switch(e.type){case'input':if(skipInputEvent===true){skipInputEvent=false;return e.preventDefault()};break;case'keydown':skipKeyPressEvent=false;skipInputEvent=false;break;case'keypress':if(skipKeyPressEvent===true){return e.preventDefault()};skipKeyPressEvent=true;break;case'click':if(iemobile){var that=this;setTimeout(function(){eventHandler.apply(that,arguments)},0);return false};break};var returnVal=eventHandler.apply(this,arguments);if(returnVal===false){e.preventDefault();e.stopPropagation()};return returnVal}};input.inputmask.events[eventName]=input.inputmask.events[eventName]||[];input.inputmask.events[eventName].push(ev);if($.inArray(eventName,['submit','reset'])!==-1){if(input.form!=null)$(input.form).on(eventName,ev)}else{$(input).on(eventName,ev)}},off:function(input,event){if(input.inputmask&&input.inputmask.events){var events;if(event){events=[];events[event]=input.inputmask.events[event]}else{events=input.inputmask.events};$.each(events,function(eventName,evArr){while(evArr.length>0){var ev=evArr.pop();if($.inArray(eventName,['submit','reset'])!==-1){if(input.form!=null)$(input.form).off(eventName,ev)}else{$(input).off(eventName,ev)}};delete input.inputmask.events[eventName]})}}};function patchValueProperty(npt){var valueGet,valueSet;function patchValhook(type){if($.valHooks&&($.valHooks[type]===undefined||$.valHooks[type].inputmaskpatch!==true)){var valhookGet=$.valHooks[type]&&$.valHooks[type].get?$.valHooks[type].get:function(elem){return elem.value},valhookSet=$.valHooks[type]&&$.valHooks[type].set?$.valHooks[type].set:function(elem,value){elem.value=value;return elem};$.valHooks[type]={get:function(elem){if(elem.inputmask){if(elem.inputmask.opts.autoUnmask){return elem.inputmask.unmaskedvalue()}else{var result=valhookGet(elem);return getLastValidPosition(undefined,undefined,elem.inputmask.maskset.validPositions)!==-1||opts.nullable!==true?result:''}}else return valhookGet(elem)},set:function(elem,value){var $elem=$(elem),result;result=valhookSet(elem,value);if(elem.inputmask){$elem.trigger('setvalue')};return result},inputmaskpatch:true}}};function getter(){if(this.inputmask){return this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():(getLastValidPosition()!==-1||opts.nullable!==true?(document.activeElement===this&&opts.clearMaskOnLostFocus?(isRTL?clearOptionalTail(getBuffer().slice()).reverse():clearOptionalTail(getBuffer().slice())).join(''):valueGet.call(this)):'')}else return valueGet.call(this)};function setter(value){valueSet.call(this,value);if(this.inputmask){$(this).trigger('setvalue')}};function installNativeValueSetFallback(npt){EventRuler.on(npt,'mouseenter',function(event){var $input=$(this),input=this,value=input.inputmask._valueGet();if(value!==getBuffer().join('')){$input.trigger('setvalue')}})};if(!npt.inputmask.__valueGet){if(Object.getOwnPropertyDescriptor){if(typeof Object.getPrototypeOf!=='function'){Object.getPrototypeOf=typeof'test'.__proto__==='object'?function(object){return object.__proto__}:function(object){return object.constructor.prototype}};var valueProperty=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt),'value'):undefined;if(valueProperty&&valueProperty.get&&valueProperty.set){valueGet=valueProperty.get;valueSet=valueProperty.set;Object.defineProperty(npt,'value',{get:getter,set:setter,configurable:true})}else if(npt.tagName!=='INPUT'){valueGet=function(){return this.textContent};valueSet=function(value){this.textContent=value};Object.defineProperty(npt,'value',{get:getter,set:setter,configurable:true})}}else if(document.__lookupGetter__&&npt.__lookupGetter__('value')){valueGet=npt.__lookupGetter__('value');valueSet=npt.__lookupSetter__('value');npt.__defineGetter__('value',getter);npt.__defineSetter__('value',setter)};npt.inputmask.__valueGet=valueGet;npt.inputmask._valueGet=function(overruleRTL){return isRTL&&overruleRTL!==true?valueGet.call(this.el).split('').reverse().join(''):valueGet.call(this.el)};npt.inputmask.__valueSet=valueSet;npt.inputmask._valueSet=function(value,overruleRTL){valueSet.call(this.el,(value===null||value===undefined)?'':((overruleRTL!==true&&isRTL)?value.split('').reverse().join(''):value))};if(valueGet===undefined){valueGet=function(){return this.value};valueSet=function(value){this.value=value};patchValhook(npt.type);installNativeValueSetFallback(npt)}}};function handleRemove(input,k,pos,strict){function generalize(){if(opts.keepStatic){resetMaskSet(true);var validInputs=[],lastAlt,positionsClone=$.extend(true,{},getMaskSet().validPositions);for(lastAlt=getLastValidPosition();lastAlt>=0;lastAlt--){var validPos=getMaskSet().validPositions[lastAlt];if(validPos){if(validPos.match.fn!=null){validInputs.push(validPos.input)};delete getMaskSet().validPositions[lastAlt];if(validPos.alternation!==undefined&&validPos.locator[validPos.alternation]===getTestTemplate(lastAlt).locator[validPos.alternation]){break}}};if(lastAlt>-1){while(validInputs.length>0){getMaskSet().p=seekNext(getLastValidPosition());var keypress=new $.Event('keypress');keypress.which=validInputs.pop().charCodeAt(0);keypressEvent.call(input,keypress,true,false,false,getMaskSet().p)}}else getMaskSet().validPositions=$.extend(true,{},positionsClone)}};if(opts.numericInput||isRTL){if(k===Inputmask.keyCode.BACKSPACE){k=Inputmask.keyCode.DELETE}else if(k===Inputmask.keyCode.DELETE){k=Inputmask.keyCode.BACKSPACE};if(isRTL){var pend=pos.end;pos.end=pos.begin;pos.begin=pend}};if(k===Inputmask.keyCode.BACKSPACE&&(pos.end-pos.begin<1||opts.insertMode===false)){pos.begin=seekPrevious(pos.begin);if(getMaskSet().validPositions[pos.begin]!==undefined&&(getMaskSet().validPositions[pos.begin].input===opts.groupSeparator||getMaskSet().validPositions[pos.begin].input===opts.radixPoint)){pos.begin--}}else if(k===Inputmask.keyCode.DELETE&&pos.begin===pos.end){pos.end=isMask(pos.end)?pos.end+1:seekNext(pos.end)+1;if(getMaskSet().validPositions[pos.begin]!==undefined&&(getMaskSet().validPositions[pos.begin].input===opts.groupSeparator||getMaskSet().validPositions[pos.begin].input===opts.radixPoint)){pos.end++}};stripValidPositions(pos.begin,pos.end,false,strict);if(strict!==true){generalize()};var lvp=getLastValidPosition(pos.begin);if(lvp<pos.begin){getMaskSet().p=seekNext(lvp)}else if(strict!==true){getMaskSet().p=pos.begin}};function keydownEvent(e){var input=this,$input=$(input),k=e.keyCode,pos=caret(input);if(k===Inputmask.keyCode.BACKSPACE||k===Inputmask.keyCode.DELETE||(iphone&&k===Inputmask.keyCode.BACKSPACE_SAFARI)||(e.ctrlKey&&k===Inputmask.keyCode.X&&!isInputEventSupported('cut'))){e.preventDefault();handleRemove(input,k,pos);writeBuffer(input,getBuffer(),getMaskSet().p,e,undoValue!==getBuffer().join(''));if(input.inputmask._valueGet()===getBufferTemplate().join('')){$input.trigger('cleared')}else if(isComplete(getBuffer())===true){$input.trigger('complete')};if(opts.showTooltip){input.title=opts.tooltip||getMaskSet().mask}}else if(k===Inputmask.keyCode.END||k===Inputmask.keyCode.PAGE_DOWN){e.preventDefault();var caretPos=seekNext(getLastValidPosition());if(!opts.insertMode&&caretPos===getMaskSet().maskLength&&!e.shiftKey)caretPos--;caret(input,e.shiftKey?pos.begin:caretPos,caretPos,true)}else if((k===Inputmask.keyCode.HOME&&!e.shiftKey)||k===Inputmask.keyCode.PAGE_UP){e.preventDefault();caret(input,0,e.shiftKey?pos.begin:0,true)}else if(((opts.undoOnEscape&&k===Inputmask.keyCode.ESCAPE)||(k===90&&e.ctrlKey))&&e.altKey!==true){checkVal(input,true,false,undoValue.split(''));$input.trigger('click')}else if(k===Inputmask.keyCode.INSERT&&!(e.shiftKey||e.ctrlKey)){opts.insertMode=!opts.insertMode;caret(input,!opts.insertMode&&pos.begin===getMaskSet().maskLength?pos.begin-1:pos.begin)}else if(opts.tabThrough===true&&k===Inputmask.keyCode.TAB){if(e.shiftKey===true){if(getTest(pos.begin).match.fn===null){pos.begin=seekNext(pos.begin)};pos.end=seekPrevious(pos.begin,true);pos.begin=seekPrevious(pos.end,true)}else{pos.begin=seekNext(pos.begin,true);pos.end=seekNext(pos.begin,true);if(pos.end<getMaskSet().maskLength)pos.end--};if(pos.begin<getMaskSet().maskLength){e.preventDefault();caret(input,pos.begin,pos.end)}}else if(opts.insertMode===false&&!e.shiftKey){if(k===Inputmask.keyCode.RIGHT){setTimeout(function(){var caretPos=caret(input);caret(input,caretPos.begin)},0)}else if(k===Inputmask.keyCode.LEFT){setTimeout(function(){var caretPos=caret(input);caret(input,isRTL?caretPos.begin+1:caretPos.begin-1)},0)}};opts.onKeyDown.call(this,e,getBuffer(),caret(input).begin,opts);ignorable=$.inArray(k,opts.ignorables)!==-1};function keypressEvent(e,checkval,writeOut,strict,ndx){var input=this,$input=$(input),k=e.which||e.charCode||e.keyCode;if(checkval!==true&&(!(e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||ignorable))){if(k===Inputmask.keyCode.ENTER&&undoValue!==getBuffer().join('')){undoValue=getBuffer().join('');setTimeout(function(){$input.trigger('change')},0)};return true}else{if(k){if(k===46&&e.shiftKey===false&&opts.radixPoint===',')k=44;var pos=checkval?{begin:ndx,end:ndx}:caret(input),forwardPosition,c=String.fromCharCode(k);getMaskSet().writeOutBuffer=true;var valResult=isValid(pos,c,strict);if(valResult!==false){var p=valResult.pos;resetMaskSet(true);if(valResult.caret!==undefined){forwardPosition=valResult.caret}else{var vps=getMaskSet().validPositions;if(!opts.keepStatic&&(vps[p+1]!==undefined&&getTests(p+1,vps[p].locator.slice(),p).length>1||vps[p].alternation!==undefined)){forwardPosition=p+1}else forwardPosition=seekNext(p)};getMaskSet().p=forwardPosition};if(writeOut!==false){var self=this;setTimeout(function(){opts.onKeyValidation.call(self,k,valResult,opts)},0);if(getMaskSet().writeOutBuffer&&valResult!==false){var buffer=getBuffer();writeBuffer(input,buffer,(opts.numericInput&&valResult.caret===undefined)?seekPrevious(forwardPosition):forwardPosition,e,checkval!==true);if(checkval!==true){setTimeout(function(){if(isComplete(buffer)===true)$input.trigger('complete')},0)}}};if(opts.showTooltip){input.title=opts.tooltip||getMaskSet().mask};e.preventDefault();if(checkval){valResult.forwardPosition=forwardPosition;return valResult}}}};function pasteEvent(e){var input=this,ev=e.originalEvent||e,$input=$(input),inputValue=input.inputmask._valueGet(true),caretPos=caret(input),tempValue;if(isRTL){tempValue=caretPos.end;caretPos.end=caretPos.begin;caretPos.begin=tempValue};var valueBeforeCaret=inputValue.substr(0,caretPos.begin),valueAfterCaret=inputValue.substr(caretPos.end,inputValue.length);if(valueBeforeCaret===(isRTL?getBufferTemplate().reverse():getBufferTemplate()).slice(0,caretPos.begin).join(''))valueBeforeCaret='';if(valueAfterCaret===(isRTL?getBufferTemplate().reverse():getBufferTemplate()).slice(caretPos.end).join(''))valueAfterCaret='';if(isRTL){tempValue=valueBeforeCaret;valueBeforeCaret=valueAfterCaret;valueAfterCaret=tempValue};if(window.clipboardData&&window.clipboardData.getData){inputValue=valueBeforeCaret+window.clipboardData.getData('Text')+valueAfterCaret}else if(ev.clipboardData&&ev.clipboardData.getData){inputValue=valueBeforeCaret+ev.clipboardData.getData('text/plain')+valueAfterCaret};var pasteValue=inputValue;if($.isFunction(opts.onBeforePaste)){pasteValue=opts.onBeforePaste(inputValue,opts);if(pasteValue===false){return e.preventDefault()};if(!pasteValue){pasteValue=inputValue}};checkVal(input,false,false,isRTL?pasteValue.split('').reverse():pasteValue.toString().split(''));writeBuffer(input,getBuffer(),seekNext(getLastValidPosition()),e,true);if(isComplete(getBuffer())===true){$input.trigger('complete')};return e.preventDefault()};function inputFallBackEvent(e){var input=this,inputValue=input.inputmask._valueGet();if(getBuffer().join('')!==inputValue){var caretPos=caret(input);inputValue=inputValue.replace(new RegExp('('+Inputmask.escapeRegex(getBufferTemplate().join(''))+')*'),'');if(iemobile){var inputChar=inputValue.replace(getBuffer().join(''),'');if(inputChar.length===1){var keypress=new $.Event('keypress');keypress.which=inputChar.charCodeAt(0);keypressEvent.call(input,keypress,true,true,false,getMaskSet().validPositions[caretPos.begin-1]?caretPos.begin:caretPos.begin-1);return false}};if(caretPos.begin>inputValue.length){caret(input,inputValue.length);caretPos=caret(input)};if((getBuffer().length-inputValue.length)===1&&inputValue.charAt(caretPos.begin)!==getBuffer()[caretPos.begin]&&inputValue.charAt(caretPos.begin+1)!==getBuffer()[caretPos.begin]&&!isMask(caretPos.begin)){e.keyCode=Inputmask.keyCode.BACKSPACE;keydownEvent.call(input,e)}else{var lvp=getLastValidPosition()+1,bufferTemplate=getBuffer().slice(lvp).join('');while(inputValue.match(Inputmask.escapeRegex(bufferTemplate)+'$')===null){bufferTemplate=bufferTemplate.slice(1)};inputValue=inputValue.replace(bufferTemplate,'');inputValue=inputValue.split('');checkVal(input,true,false,inputValue);if(isComplete(getBuffer())===true){$(input).trigger('complete')}};e.preventDefault()}};function setValueEvent(e){var input=this,value=input.inputmask._valueGet();checkVal(input,true,false,($.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(value,opts)||value):value).split(''));undoValue=getBuffer().join('');if((opts.clearMaskOnLostFocus||opts.clearIncomplete)&&input.inputmask._valueGet()===getBufferTemplate().join('')){input.inputmask._valueSet('')}};function focusEvent(e){var input=this,nptValue=input.inputmask._valueGet();if(opts.showMaskOnFocus&&(!opts.showMaskOnHover||(opts.showMaskOnHover&&nptValue===''))){if(input.inputmask._valueGet()!==getBuffer().join('')){writeBuffer(input,getBuffer(),seekNext(getLastValidPosition()))}}else if(mouseEnter===false){caret(input,seekNext(getLastValidPosition()))};if(opts.positionCaretOnTab===true){setTimeout(function(){caret(input,seekNext(getLastValidPosition()))},0)};undoValue=getBuffer().join('')};function mouseleaveEvent(e){var input=this;mouseEnter=false;if(opts.clearMaskOnLostFocus&&document.activeElement!==input){var buffer=getBuffer().slice(),nptValue=input.inputmask._valueGet();if(nptValue!==input.getAttribute('placeholder')&&nptValue!==''){if(getLastValidPosition()===-1&&nptValue===getBufferTemplate().join('')){buffer=[]}else{clearOptionalTail(buffer)};writeBuffer(input,buffer)}}};function clickEvent(e){function doRadixFocus(clickPos){if(opts.radixPoint!==''){var vps=getMaskSet().validPositions;if(vps[clickPos]===undefined||(vps[clickPos].input===getPlaceholder(clickPos))){if(clickPos<seekNext(-1))return true;var radixPos=$.inArray(opts.radixPoint,getBuffer());if(radixPos!==-1){for(var vp in vps){if(radixPos<vp&&vps[vp].input!==getPlaceholder(vp)){return false}};return true}}};return false};var input=this;setTimeout(function(){if(document.activeElement===input){var selectedCaret=caret(input);if(selectedCaret.begin===selectedCaret.end){switch(opts.positionCaretOnClick){case'none':break;case'radixFocus':if(doRadixFocus(selectedCaret.begin)){caret(input,opts.numericInput?seekNext($.inArray(opts.radixPoint,getBuffer())):$.inArray(opts.radixPoint,getBuffer()));break};default:var clickPosition=selectedCaret.begin,lvclickPosition=getLastValidPosition(clickPosition,true),lastPosition=seekNext(lvclickPosition);if(clickPosition<lastPosition){caret(input,!isMask(clickPosition)&&!isMask(clickPosition-1)?seekNext(clickPosition):clickPosition)}else{var placeholder=getPlaceholder(lastPosition);if((placeholder!==''&&getBuffer()[lastPosition]!==placeholder)||(!isMask(lastPosition,true)&&getTest(lastPosition).match.def===placeholder)){lastPosition=seekNext(lastPosition)};caret(input,lastPosition)};break}}}},0)};function dblclickEvent(e){var input=this;setTimeout(function(){caret(input,0,seekNext(getLastValidPosition()))},0)};function cutEvent(e){var input=this,$input=$(input),pos=caret(input),ev=e.originalEvent||e,clipboardData=window.clipboardData||ev.clipboardData,clipData=isRTL?getBuffer().slice(pos.end,pos.begin):getBuffer().slice(pos.begin,pos.end);clipboardData.setData('text',isRTL?clipData.reverse().join(''):clipData.join(''));if(document.execCommand)document.execCommand('copy');handleRemove(input,Inputmask.keyCode.DELETE,pos);writeBuffer(input,getBuffer(),getMaskSet().p,e,undoValue!==getBuffer().join(''));if(input.inputmask._valueGet()===getBufferTemplate().join('')){$input.trigger('cleared')};if(opts.showTooltip){input.title=opts.tooltip||getMaskSet().mask}};function blurEvent(e){var $input=$(this),input=this;if(input.inputmask){var nptValue=input.inputmask._valueGet(),buffer=getBuffer().slice();if(undoValue!==buffer.join('')){setTimeout(function(){$input.trigger('change');undoValue=buffer.join('')},0)};if(nptValue!==''){if(opts.clearMaskOnLostFocus){if(getLastValidPosition()===-1&&nptValue===getBufferTemplate().join('')){buffer=[]}else{clearOptionalTail(buffer)}};if(isComplete(buffer)===false){setTimeout(function(){$input.trigger('incomplete')},0);if(opts.clearIncomplete){resetMaskSet();if(opts.clearMaskOnLostFocus){buffer=[]}else{buffer=getBufferTemplate().slice()}}};writeBuffer(input,buffer,undefined,e)}}};function mouseenterEvent(e){var input=this;mouseEnter=true;if(document.activeElement!==input&&opts.showMaskOnHover){if(input.inputmask._valueGet()!==getBuffer().join('')){writeBuffer(input,getBuffer())}}};function submitEvent(e){if(undoValue!==getBuffer().join('')){$el.trigger('change')};if(opts.clearMaskOnLostFocus&&getLastValidPosition()===-1&&el.inputmask._valueGet&&el.inputmask._valueGet()===getBufferTemplate().join('')){el.inputmask._valueSet('')};if(opts.removeMaskOnSubmit){el.inputmask._valueSet(el.inputmask.unmaskedvalue(),true);setTimeout(function(){writeBuffer(el,getBuffer())},0)}};function resetEvent(e){setTimeout(function(){$el.trigger('setvalue')},0)};function mask(elem){el=elem;$el=$(el);if(opts.showTooltip){el.title=opts.tooltip||getMaskSet().mask};if(el.dir==='rtl'||opts.rightAlign){el.style.textAlign='right'};if(el.dir==='rtl'||opts.numericInput){el.dir='ltr';el.removeAttribute('dir');el.inputmask.isRTL=true;isRTL=true};EventRuler.off(el);patchValueProperty(el);if(isElementTypeSupported(el,opts)){EventRuler.on(el,'submit',submitEvent);EventRuler.on(el,'reset',resetEvent);EventRuler.on(el,'mouseenter',mouseenterEvent);EventRuler.on(el,'blur',blurEvent);EventRuler.on(el,'focus',focusEvent);EventRuler.on(el,'mouseleave',mouseleaveEvent);EventRuler.on(el,'click',clickEvent);EventRuler.on(el,'dblclick',dblclickEvent);EventRuler.on(el,'paste',pasteEvent);EventRuler.on(el,'dragdrop',pasteEvent);EventRuler.on(el,'drop',pasteEvent);EventRuler.on(el,'cut',cutEvent);EventRuler.on(el,'complete',opts.oncomplete);EventRuler.on(el,'incomplete',opts.onincomplete);EventRuler.on(el,'cleared',opts.oncleared);if(opts.inputEventOnly!==true){EventRuler.on(el,'keydown',keydownEvent);EventRuler.on(el,'keypress',keypressEvent)};EventRuler.on(el,'input',inputFallBackEvent)};EventRuler.on(el,'setvalue',setValueEvent);if(el.inputmask._valueGet()!==''||opts.clearMaskOnLostFocus===false||document.activeElement===el){var initialValue=$.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(el.inputmask._valueGet(),opts)||el.inputmask._valueGet()):el.inputmask._valueGet();checkVal(el,true,false,initialValue.split(''));var buffer=getBuffer().slice();undoValue=buffer.join('');if(isComplete(buffer)===false){if(opts.clearIncomplete){resetMaskSet()}};if(opts.clearMaskOnLostFocus&&document.activeElement!==el){if(getLastValidPosition()===-1){buffer=[]}else{clearOptionalTail(buffer)}};writeBuffer(el,buffer);if(document.activeElement===el){caret(el,seekNext(getLastValidPosition()))}}};var valueBuffer;if(actionObj!==undefined){switch(actionObj.action){case'isComplete':el=actionObj.el;return isComplete(getBuffer());case'unmaskedvalue':el=actionObj.el;if(el!==undefined&&el.inputmask!==undefined){maskset=el.inputmask.maskset;opts=el.inputmask.opts;isRTL=el.inputmask.isRTL}else{valueBuffer=actionObj.value;if(opts.numericInput){isRTL=true};valueBuffer=($.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(valueBuffer,opts)||valueBuffer):valueBuffer).split('');checkVal(undefined,false,false,isRTL?valueBuffer.reverse():valueBuffer);if($.isFunction(opts.onBeforeWrite))opts.onBeforeWrite(undefined,getBuffer(),0,opts)};return unmaskedvalue(el);case'mask':el=actionObj.el;maskset=el.inputmask.maskset;opts=el.inputmask.opts;isRTL=el.inputmask.isRTL;undoValue=getBuffer().join('');mask(el);break;case'format':if(opts.numericInput){isRTL=true};valueBuffer=($.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(actionObj.value,opts)||actionObj.value):actionObj.value).split('');checkVal(undefined,false,false,isRTL?valueBuffer.reverse():valueBuffer);if($.isFunction(opts.onBeforeWrite))opts.onBeforeWrite(undefined,getBuffer(),0,opts);if(actionObj.metadata){return{value:isRTL?getBuffer().slice().reverse().join(''):getBuffer().join(''),metadata:maskScope({'action':'getmetadata'},maskset,opts)}};return isRTL?getBuffer().slice().reverse().join(''):getBuffer().join('');case'isValid':if(opts.numericInput){isRTL=true};if(actionObj.value){valueBuffer=actionObj.value.split('');checkVal(undefined,false,true,isRTL?valueBuffer.reverse():valueBuffer)}else{actionObj.value=getBuffer().join('')};var buffer=getBuffer(),rl=determineLastRequiredPosition(),lmib=buffer.length-1;for(;lmib>rl;lmib--){if(isMask(lmib))break};buffer.splice(rl,lmib+1-rl);return isComplete(buffer)&&actionObj.value===getBuffer().join('');case'getemptymask':return getBufferTemplate().join('');case'remove':el=actionObj.el;$el=$(el);maskset=el.inputmask.maskset;opts=el.inputmask.opts;el.inputmask._valueSet(unmaskedvalue(el));EventRuler.off(el);var valueProperty;if(Object.getOwnPropertyDescriptor&&Object.getPrototypeOf){valueProperty=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(el),'value');if(valueProperty){if(el.inputmask.__valueGet){Object.defineProperty(el,'value',{get:el.inputmask.__valueGet,set:el.inputmask.__valueSet,configurable:true})}}}else if(document.__lookupGetter__&&el.__lookupGetter__('value')){if(el.inputmask.__valueGet){el.__defineGetter__('value',el.inputmask.__valueGet);el.__defineSetter__('value',el.inputmask.__valueSet)}};el.inputmask=undefined;break;case'getmetadata':if($.isArray(maskset.metadata)){var alternation,lvp=getLastValidPosition(undefined,true);for(var firstAlt=lvp;firstAlt>=0;firstAlt--){if(getMaskSet().validPositions[firstAlt]&&getMaskSet().validPositions[firstAlt].alternation!==undefined){alternation=getMaskSet().validPositions[firstAlt].alternation;break}};return alternation!==undefined?maskset.metadata[getMaskSet().validPositions[firstAlt].locator[alternation]]:[]};return maskset.metadata}}};window.Inputmask=Inputmask;return Inputmask}));(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','inputmask'],factory)}else if(typeof exports==='object'){module.exports=factory(require('jquery'),require('./inputmask'))}else{factory(jQuery,window.Inputmask)}}(function($,Inputmask){if($.fn.inputmask===undefined){$.fn.inputmask=function(fn,options){var nptmask,input=this[0];if(options===undefined)options={};if(typeof fn==='string'){switch(fn){case'unmaskedvalue':return input&&input.inputmask?input.inputmask.unmaskedvalue():$(input).val();case'remove':return this.each(function(){if(this.inputmask)this.inputmask.remove()});case'getemptymask':return input&&input.inputmask?input.inputmask.getemptymask():'';case'hasMaskedValue':return input&&input.inputmask?input.inputmask.hasMaskedValue():false;case'isComplete':return input&&input.inputmask?input.inputmask.isComplete():true;case'getmetadata':return input&&input.inputmask?input.inputmask.getmetadata():undefined;case'setvalue':$(input).val(options);if(input&&input.inputmask===undefined){$(input).triggerHandler('setvalue')};break;case'option':if(typeof options==='string'){if(input&&input.inputmask!==undefined){return input.inputmask.option(options)}}else{return this.each(function(){if(this.inputmask!==undefined){return this.inputmask.option(options)}})};break;default:options.alias=fn;nptmask=new Inputmask(options);return this.each(function(){nptmask.mask(this)})}}else if(typeof fn=='object'){nptmask=new Inputmask(fn);if(fn.mask===undefined&&fn.alias===undefined){return this.each(function(){if(this.inputmask!==undefined){return this.inputmask.option(fn)}else nptmask.mask(this)})}else{return this.each(function(){nptmask.mask(this)})}}else if(fn===undefined){return this.each(function(){nptmask=new Inputmask(options);nptmask.mask(this)})}}};return $.fn.inputmask}));var fn={};function dd(data){console.log(data)};fn.loadCss=function(url){$('head').append('<link rel="stylesheet" href="'+url+'" type="text/css">')};fn.loadingHtml=function(box){var html='<div class="loading"><i class="fa fa-circle-o-notch fa-spin"></i></div>';box.empty().html(html)};fn.int=function(str,def){var int=parseInt(str);def=def?def:0;return isNaN(int)?def:int};fn.serializeArray=function(box){var data={};$('input, textarea, select',box).each(function(){var el=$(this),name=el.attr('name');if(!name){return};if(el.attr('type')=='checkbox'){if(el.is(':checked')){data[name]=data[name]||[];data[name].push(el.val())};return};data[name]=el.val()});return data};fn.price=function(price){price=new String(price);return price.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,'$1 ')};fn.scrollTo=function(el,duration,options){options=$.extend({offsetTop:-50,easing:'swing'},options);if(!duration){duration=600};$('html, body').animate({scrollTop:el.offset().top+options.offsetTop,},duration,options.easing)};var Url=function(){this.path='',this.get={},this.hash={},this.init=function(){var url={};var tmp=location.href.split('?');if(tmp[1]){tmp=tmp[1].split('#');url.get=tmp[0];url.hash=tmp[1]};url.hash=location.hash.substr(1);url.path='/'+tmp[0].replace(/^http:\/\/[a-zA-Z1-9\-\.]*\//,'');this.path=url.path;if(url.get){var getParams=url.get.split('&');for(i=0;i<getParams.length;i++){var tmp=getParams[i].split('=');this.get[tmp[0]]=tmp[1]}};if(url.hash){var hashParams=url.hash.split('&');for(i=0;i<hashParams.length;i++){var tmp=hashParams[i].split('=');this.hash[tmp[0]]=tmp[1]}};return this};this.setPath=function(path){this.path=path;return this};this.setParams=function(params,value){if(typeof params==='object'){this.get=$.extend(this.get,params)}else{this.get[params]=value};return this};this.getParams=function(key){if(key){return this.get[key]}else{return this.get}};this.clearParams=function(){this.get={};return this};this.setHash=function(params,value){if(typeof params==='object'){this.hash=$.extend(this.hash,params)}else{this.hash[params]=value};location.hash='#'+this.generateHash();return this};this.getHash=function(key){if(key){return this.hash[key]}else{return this.hash}};this.clearHash=function(){this.hash={};return this};this.generateParams=function(){var getParams='',first=true;for(var param in this.get){if(this.get[param]){getParams+=(first?'':'&')+param+'='+this.get[param];first=false}};return getParams};this.generateHash=function(){var hashParams='',first=true;for(var param in this.hash){if(this.hash[param]){hashParams+=(first?'':'&')+param+'='+this.hash[param];first=false}};return hashParams};this.getUrl=function(){var url=this.path;if(getParams=this.generateParams()){url+='?'+getParams};if(hashParams=this.generateHash()){url+='#'+hashParams};return url};this.redirect=function(){location.href=this.getUrl()}};fn.url=function(){return new Url()};var Tabs=function(){this.el=null;this.options={historyMode:false,afterLoad:false};this.init=function(options){this.options=$.extend(this.options,options);var header=this.el.children('.tabs-header');this.el.find('.tab').each(function(){var tab=$(this);if(!tab.data('tab')){tab.attr('data-tab',(parseInt(tab.index()+1)))}});var tabs=this;header.find('.tab').on('click',function(){var tab=$(this);if(tab.prop('tagName')!='A'||tab.data('load')){tabs.setActive(tab);return false}});var active=header.children('.tab.active');if(!active.length){var tabName=fn.url().getHash(this.el.attr('data-name'));if(tabName){active=header.children('.tab[data-tab="'+tabName+'"]').addClass('active')}};if(!active.length){active=header.children('.tab:eq(0)').addClass('active')};tabs.setActive(active)};this.setActive=function(tab){var header=this.el.children('.tabs-header'),body=this.el.children('.tabs-body'),headerTab=header.find(tab),bodyTab=body.find('.tab[data-tab="'+tab.attr('data-tab')+'"]');if(!bodyTab.length){bodyTab=$('<div class="tab"></div>');bodyTab.attr('data-tab',tab.attr('data-tab'));bodyTab.appendTo(body)};if(headerTab.hasClass('active')&&!bodyTab.is(':empty')){bodyTab.addClass('active');return};headerTab.addClass('active').siblings().removeClass('active');bodyTab.addClass('active').siblings().removeClass('active');var options=this.options;if(headerTab.attr('data-load')){var url=headerTab.attr('data-load');if(this.options.historyMode){var disablePushState=this.options.disablePushState;$.ajax({url:url,dataType:'json',success:function(resp){bodyTab.html(resp.html);if(!disablePushState){History.replaceState({},resp.meta.title,url)};if(options.afterLoad){options.afterLoad()}}})}else{bodyTab.load(url,function(){headerTab.attr('data-load',null)})}};if(this.el.attr('data-name')){fn.url().setHash(this.el.attr('data-name'),headerTab.attr('data-tab'))}};this.setElement=function(el){this.el=el;return this}};$.fn.tabs=function(options){$(this).each(function(){var tabs=new Tabs();tabs.setElement($(this)).init(options)})};$.aptero=fn;jQuery.cookie=function(e,i,o){if('undefined'==typeof i){var n=null;if(document.cookie&&''!=document.cookie)for(var r=document.cookie.split(';'),t=0;t<r.length;t++){var p=jQuery.trim(r[t]);if(p.substring(0,e.length+1)==e+'='){n=decodeURIComponent(p.substring(e.length+1));break}};return n};o=o||{},null===i&&(i='',o.expires=-1);var u='';if(o.expires&&('number'==typeof o.expires||o.expires.toUTCString)){var s;'number'==typeof o.expires?(s=new Date,s.setTime(s.getTime()+24*o.expires*60*60*1e3)):s=o.expires,u='; expires='+s.toUTCString()};var a=o.path?'; path='+o.path:'',c=o.domain?'; domain='+o.domain:'',m=o.secure?'; secure':'';document.cookie=[e,'=',encodeURIComponent(i),u,a,c,m].join('')};var Products=function(){this.products=[];this.cookie='viewed-products';this.init=function(){var jsonProducts=$.cookie(this.cookie);this.products=jsonProducts?$.parseJSON(jsonProducts):[];return this};this.clear=function(){this.products=[]};this.add=function(data){var exists=false;data.date=$.now();for(var i=0;i<this.products.length;i++){if(this.products[i].id==data.id){data.count=this.products[i].count+1;this.products.splice(i,1,data);exists=true}};if(!exists){data.count=1;this.products.push(data)};this.save()};this.getProducts=function(){return this.products};this.save=function(){var productsJson=null;if(this.products.length){productsJson=JSON.stringify(this.products)};this.products.sort(function(a,b){return(a.date<b.date)});this.products=this.products.splice(0,9);$.cookie(this.cookie,productsJson,{expires:365,path:'/'})}},Cart=function(){this.cart=[];this.price=0;this.count=0;this.sum=0;this.cookie='cart';this.init=function(){this.on('update',function(){this.save();this.sync()});var jsonCart=$.cookie(this.cookie);this.cart=jsonCart?$.parseJSON(jsonCart):[];this.trigger('update')};this.clear=function(){this.cart=[];this.trigger('update')};this.compare=function(data1,data2){return data1.product_id==data2.product_id&&data1.taste_id==data2.taste_id&&data1.size_id==data2.size_id};this.getProductInfo=function(data,callback){$.ajax({url:'/catalog/get-product-info/',data:data,success:callback,dataType:'json',method:'post'})};this.add=function(data,options){options=$.extend({count:'increase'},options);var exists=false,newCount=parseInt(data.count),diff=newCount;for(var i=0;i<this.cart.length;i++){if(!this.compare(this.cart[i],data)){continue};if(options.count=='increase'){data.count=newCount+parseInt(this.cart[i].count)}else{diff=newCount-parseInt(this.cart[i].count)};this.cart.splice(i,1,data);exists=true};if(!exists){this.cart.push(data)};if(diff>0){this.getProductInfo(data,function(resp){gtag('event','add_to_cart',{'items':[$.extend(resp,{quantity:diff})]});gtag('event','order_event',{'event_category':'catalog','event_action':'order','event_label':'cart_add','value':10});window.metrikaEc.push({ecommerce:{add:{products:resp}}});getYandexCounter().reachGoal('cart_add')})}else{this.getProductInfo(data,function(resp){gtag('event','remove_from_cart',{'items':[$.extend(resp,{quantity:diff*-1})]});gtag('event','order_event',{'event_category':'catalog','event_action':'order','event_label':'cart_del','value':10});window.metrikaEc.push({ecommerce:{add:{products:resp}}});getYandexCounter().reachGoal('cart_del')})};this.trigger('update')};this.del=function(data){for(var i in this.cart){if(this.compare(this.cart[i],data)){var quantity=this.cart[i].count;this.cart.splice(i,1);this.getProductInfo(data,function(resp){gtag('event','remove_from_cart',{'items':[$.extend(resp,{quantity:quantity})]});gtag('event','order_event',{'event_category':'catalog','event_action':'order','event_label':'cart_del','value':10});window.metrikaEc.push({ecommerce:{add:{products:resp}}});getYandexCounter().reachGoal('cart_del')});break}};this.trigger('update')};this.ecoomerceCart=function(callback){this.getProductInfo({products:this.cart},function(resp){callback(resp)})};this.getCart=function(){return this.cart};this.save=function(){var cartJson=null;if(this.cart.length){cartJson=JSON.stringify(this.cart)};$.cookie(this.cookie,cartJson,{expires:365,path:'/'})};this.sync=function(){var cart=this;$.ajax({url:'/cart/get-info/',success:function(serverCart){cart.cart=[];for(var i in serverCart.cart){var product=serverCart.cart[i];cart.cart.push(product)};cart.price=serverCart.price;cart.count=parseInt(serverCart.count);cart.sum=serverCart.price;cart.delivery=serverCart.delivery;cart.save();cart.trigger('render')},dataType:'json'})};this.on=function(event,fn){$(this).on(event,fn)};this.trigger=function(event){$(this).trigger(event)}};$.cart=new Cart();$.cart.init();var FormValidator=function(){this.form=null;this.options={autoValidate:false,before:false,after:false,fail:false,success:false,};this.setElement=function(form){this.form=form;return this};this.init=function(options){this.options=$.extend(this.options,options);$('input, select, textarea',this.form).on('change, keyup',function(){var parent=$(this).parent();parent.removeClass('invalid');parent.find('.errors').remove()});return this};this.renderErrors=function(errors){if(!errors){return''};var html='<div class="errors">';for(key in errors){html+='<div class="error">'+errors[key]+'</li>'};html+='</div>';return html};this.checkErrors=function(form,options){options=$.extend({requestType:'submit',element:null,async:true},options);var result=false,data=form.serializeArray(),async=options.async;data.push({name:'requestType',value:options.requestType});var formV=this;$.ajax({type:'POST',async:async,url:form.attr('action'),data:data,dataType:'json',success:function(resp){if(!resp['errors']||!Object.keys(resp['errors']).length){form.find('.errors').remove();form.find('.invalid').removeClass('invalid');result=resp?resp:true;return};form.find('c').empty();$('.form-errors',form).empty();if(resp['errors']['all']){console.log(resp['errors']['all']);$('.form-errors',form).append(formV.renderErrors(resp['errors']['all']))};form.find('input[type!="submit"], select, textarea').each(function(){var input=$(this),inputBox=$(this).parent(),errorsBox=inputBox.find('.errors'),errors=resp['errors'][input.attr('name')];if(!errors){errorsBox.remove();inputBox.removeClass('invalid')};if(options.element){if(options.element.attr('name')==input.attr('name')){errorsBox.remove();if(resp['errors'][input.attr('name')]){inputBox.addClass('invalid');inputBox.append(formV.renderErrors(errors))}else{inputBox.removeClass('invalid')}};return};errorsBox.remove();if(errors){inputBox.addClass('invalid');inputBox.append(formV.renderErrors(errors))}else{inputBox.removeClass('invalid')}})}});return result};this.formValidate=function(){return checkErrors($(this),{requestType:'validate',async:false})};this.submit=function(){var options=this.options,form=this.form,formV=this;this.form.on('submit',function(){if(options.before){options.before(form)};if(result=formV.checkErrors(form,{requestType:'submit',async:false})){if(options.success){options.success(result,form)}}else{if(options.fail){options.fail(result,form)}};if(options.after){options.after(result,form)};return false});return this}};$.fn.formSubmit=function(options){$(this).each(function(){var form=new FormValidator();form.setElement($(this)).init(options).submit()})};(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else{factory(jQuery)}})(function($){'use strict';var instances=[],matchers=[],defaultOptions={precision:100,elapse:false,defer:false};matchers.push(/^[0-9]*$/.source);matchers.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source);matchers.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source);matchers=new RegExp(matchers.join('|'));function parseDateString(dateString){if(dateString instanceof Date){return dateString};if(String(dateString).match(matchers)){if(String(dateString).match(/^[0-9]*$/)){dateString=Number(dateString)};if(String(dateString).match(/\-/)){dateString=String(dateString).replace(/\-/g,'/')};return new Date(dateString)}else{throw new Error('Couldn\'t cast `'+dateString+'` to a date object.');}};var DIRECTIVE_KEY_MAP={'Y':'years','m':'months','n':'daysToMonth','d':'daysToWeek','w':'weeks','W':'weeksToMonth','H':'hours','M':'minutes','S':'seconds','D':'totalDays','I':'totalHours','N':'totalMinutes','T':'totalSeconds'};function escapedRegExp(str){var sanitize=str.toString().replace(/([.?*+^$[\]\\(){}|-])/g,'\\$1');return new RegExp(sanitize)};function strftime(offsetObject){return function(format){var directives=format.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(directives){for(var i=0,len=directives.length;i<len;++i){var directive=directives[i].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),regexp=escapedRegExp(directive[0]),modifier=directive[1]||'',plural=directive[3]||'',value=null;directive=directive[2];if(DIRECTIVE_KEY_MAP.hasOwnProperty(directive)){value=DIRECTIVE_KEY_MAP[directive];value=Number(offsetObject[value])};if(value!==null){if(modifier==='!'){value=pluralize(plural,value)};if(modifier===''){if(value<10){value='0'+value.toString()}};format=format.replace(regexp,value.toString())}}};format=format.replace(/%%/,'%');return format}};function pluralize(format,count){var plural='s',singular='';if(format){format=format.replace(/(:|;|\s)/gi,'').split(/\,/);if(format.length===1){plural=format[0]}else{singular=format[0];plural=format[1]}};if(Math.abs(count)>1){return plural}else{return singular}};var Countdown=function(el,finalDate,options){this.el=el;this.$el=$(el);this.interval=null;this.offset={};this.options=$.extend({},defaultOptions);this.instanceNumber=instances.length;instances.push(this);this.$el.data('countdown-instance',this.instanceNumber);if(options){if(typeof options==='function'){this.$el.on('update.countdown',options);this.$el.on('stoped.countdown',options);this.$el.on('finish.countdown',options)}else{this.options=$.extend({},defaultOptions,options)}};this.setFinalDate(finalDate);if(this.options.defer===false){this.start()}};$.extend(Countdown.prototype,{start:function(){if(this.interval!==null){clearInterval(this.interval)};var self=this;this.update();this.interval=setInterval(function(){self.update.call(self)},this.options.precision)},stop:function(){clearInterval(this.interval);this.interval=null;this.dispatchEvent('stoped')},toggle:function(){if(this.interval){this.stop()}else{this.start()}},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this);instances[this.instanceNumber]=null;delete this.$el.data().countdownInstance},setFinalDate:function(value){this.finalDate=parseDateString(value)},update:function(){if(this.$el.closest('html').length===0){this.remove();return};var hasEventsAttached=$._data(this.el,'events')!==undefined,now=new Date(),newTotalSecsLeft;newTotalSecsLeft=this.finalDate.getTime()-now.getTime();newTotalSecsLeft=Math.ceil(newTotalSecsLeft/1000);newTotalSecsLeft=!this.options.elapse&&newTotalSecsLeft<0?0:Math.abs(newTotalSecsLeft);if(this.totalSecsLeft===newTotalSecsLeft||!hasEventsAttached){return}else{this.totalSecsLeft=newTotalSecsLeft};this.elapsed=(now>=this.finalDate);this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),weeksToMonth:Math.floor(this.totalSecsLeft/60/60/24/7)%4,months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-now.getFullYear()),totalDays:Math.floor(this.totalSecsLeft/60/60/24),totalHours:Math.floor(this.totalSecsLeft/60/60),totalMinutes:Math.floor(this.totalSecsLeft/60),totalSeconds:this.totalSecsLeft};if(!this.options.elapse&&this.totalSecsLeft===0){this.stop();this.dispatchEvent('finish')}else{this.dispatchEvent('update')}},dispatchEvent:function(eventName){var event=$.Event(eventName+'.countdown');event.finalDate=this.finalDate;event.elapsed=this.elapsed;event.offset=$.extend({},this.offset);event.strftime=strftime(this.offset);this.$el.trigger(event)}});$.fn.countdown=function(){var argumentsArray=Array.prototype.slice.call(arguments,0);return this.each(function(){var instanceNumber=$(this).data('countdown-instance');if(instanceNumber!==undefined){var instance=instances[instanceNumber],method=argumentsArray[0];if(Countdown.prototype.hasOwnProperty(method)){instance[method].apply(instance,argumentsArray.slice(1))}else if(String(method).match(/^[$A-Z_][0-9A-Z_$]*$/i)===null){instance.setFinalDate.call(instance,method);instance.start()}else{$.error('Method %s does not exist on jQuery.countdown'.replace(/\%s/gi,method))}}else{new Countdown(this,argumentsArray[0],argumentsArray[1])}})}});$(function(){initPopups();initElements($('body'));initNav();initDatepicker();initAutocomplete();initMetric()});function initMetric(){var url=$.aptero.url();url.init();$.ajax({url:'/metrics/init/',method:'post',data:{query:url.getParams()}})};function initNav(){var header=$('#header'),fog=$('#fog');$('.item',header).on('click',function(){var box=$('.box.'+$(this).data('box'),header);if(box.css('display')=='none'){$('.box',header).css({display:'none'});box.slideDown(200);fog.fadeIn(200)}else{box.slideUp(200);fog.fadeOut(200)}});fog.on('click',function(){$('.box',header).slideUp(200);fog.fadeOut(200)})};function initElements(box){$('.popup-gallery',box).lightGallery({thumbnail:true,animateThumb:true,download:false,closable:true});$('.select-group',box).each(function(){var group=$(this),vals=$('span',group),input=$('input',group),setActive=function(val){if(input.val()==val){return};input.val(val).trigger('change');$('span[data-value="'+val+'"]',group).addClass('selected').siblings().removeClass('selected')};vals.on('click',function(){setActive($(this).data('value'))});var initVal=input.val()?input.val():vals.eq(0).data('value');input.val('');setActive(initVal)});$('.std-counter',box).each(function(){var el=$(this),input=$('input',el);$('.incr',el).on('click',function(){var count=parseInt(input.val())+1,max=input.attr('max')?parseInt(input.attr('max')):999;if(count>max){return false};input.val(count)});$('.decr',el).on('click',function(){var count=parseInt(input.val())-1,min=input.attr('min')?parseInt(input.attr('min')):1;if(count<min){return false};input.val(count)});var timer=null;$('.incr, .decr',el).on('click',function(){if(timer)clearTimeout(timer);setTimeout(function(){input.trigger('change')},200)})})};function initPopups(){$('body').on('click','.popup',function(){var el=$(this);$.fancybox.open({src:el.attr('href'),type:'ajax',opts:{ajax:{settings:{data:el.data()}},afterLoad:function(e){initElements(e.$refs.slider)}}});return false})};function initAutocomplete(){var input=$('.search .query'),url='/catalog/search/';function stars(stars){var html='<div class="stars">';for($i=0;$i<=4;$i++){$starFilling=stars-$i;if($starFilling>=0.6){$class=' class="full"'}else if($starFilling>=0.1){$class=' class="half"'}else{$class=''};html+='<div'+$class+'></div> '};html+='</div>';return html};$.widget('custom.catcomplete',$.ui.autocomplete,{_create:function(){this._super();this.widget().menu('option','items','.ac-item');$('.add-to-cart').menu('option','disabled',true)},_renderItem:function(ul,item){var li=$('<li></li>');li.addClass('ac-item');switch(item.type){case'title':break;case'hr':li.addClass('ac-hr').removeClass('ac-item').text(item.label);break;case'clear':li.addClass('ac-clear').removeClass('ac-item').text(item.label);break;case'show-all':li.addClass('ac-show-all').removeClass('ac-item');li.append('<span>Показать еще</span>');li.on('click',function(){location.href=url+'?query='+input.val()});break;case'category':li.addClass('ac-category');li.append('<a href="'+item.url+'">'+item.label+'</a>');break;case'brand':li.addClass('ac-brand');li.append('<a href="'+item.url+'">'+item.label+'</a>');break;case'product':li.addClass('ac-product');li.append('<div class="pr-box"><div><a href="'+item.url+'" class="pic"><img src="'+item.img+'"></a><div class="info"><a href="'+item.url+'" class="title">'+item.label+'</a><div>'+stars(item.stars)+'<span class="reviews">'+item.reviews+'</span></div><span class="price"><span>от</span> '+$.aptero.price(item.price)+' <i class="fa fa-rub"></i></span> </div></div></div>');break;default:li.append('<a href="#">'+item.label+'</a>')};if(item.hide){li.addClass('hide').removeClass('ac-item')};return li.appendTo(ul)}});var pos={my:'left top',at:'left bottom'};input.catcomplete({position:pos,source:function(request,response){$.ajax({url:url,type:'get',dataType:'json',data:{query:request.term},success:function(data){response(data)}})},select:function(event,ui){if(ui.item.url){location.href=ui.item.url}},open:function(event,ui){$('.order-box .js-to-cart','.ac-product').on('click',function(e){var el=$(this);cart.add({id:el.data('id'),count:1});e.stopPropagation();return false})},lookup:'res',maxHeight:300,width:630,zIndex:9999,deferRequestBy:300,params:{limit:10},})};function initDatepicker(){$.config.datepicker={clearText:'Очистить',clearStatus:'',closeText:'Закрыть',closeStatus:'',prevText:'',prevStatus:'',nextText:'',nextStatus:'',currentText:'Сегодня',currentStatus:'',monthNames:['Январь','Февраль','Март','Апрель','Май','Июнь','Июль','Август','Сентябрь','Октябрь','Ноябрь','Декабрь'],monthNamesShort:['Янв','Фев','Мар','Апр','Май','Июн','Июл','Авг','Сен','Окт','Ноя','Дек'],monthStatus:'',yearStatus:'',weekHeader:'Не',weekStatus:'',dayNames:['воскресенье','понедельник','вторник','среда','четверг','пятница','суббота'],dayNamesShort:['вск','пнд','втр','срд','чтв','птн','сбт'],dayNamesMin:['Вс','Пн','Вт','Ср','Чт','Пт','Сб'],dayStatus:'DD',dateStatus:'D, M d',dateFormat:'dd.mm.yy',firstDay:1,initStatus:'',isRTL:false,minDate:+1,maxDate:+30,};$('.datepicker').datepicker($.config.datepicker)};var mapsArr=[];function setPickupMap(options){var map=null;$.each(mapsArr,function(key,val){if(val.id==options.id){val.map.destroy();mapsArr.splice(key,1)}});$.getScript(libs.libYandexMaps,function(){var data=options.pointsData?options.pointsData:{};var url=options.url?options.url:'/delivery/points-map-data/';$.ajax({url:url,method:'post',data:data,success:function(resp){options=$.extend(options,{center:resp.center,points:resp.points,});initMap(options)}})});var initMap=function(options){if(!options.center.lat||!options.center.lon){return};ymaps.ready(function(){map=new ymaps.Map(options.id,{center:[options.center.lat,options.center.lon],controls:[],zoom:(options.zoom?options.zoom:11)});var clusterer=new ymaps.Clusterer({preset:'twirl#invertedBlueClusterIcons',clusterDisableClickZoom:false,});var markers=[];options.points.forEach(function(point){var marker=new ymaps.Placemark([point.lat,point.lon],{balloonContent:point.desc},{preset:'islands#blackHomeIcon',});marker.events.add('balloonopen',function(e){initElements($('.marker-box'))});markers.push(marker);map.geoObjects.add(marker)});if(options.zoom!==undefined&&options.zoom==false){map.behaviors.disable('scrollZoom')};map.controls.add('zoomControl',{top:10,left:5});if(options.onInit){options.onInit()};mapsArr.push({id:options.id,map:map})})};return map};$(function(){productView($('.product-view'));cartView();cartRender();userModel();orderForm()});function orderForm(){$('.order-popup').on('click',function(){$.fancybox.open({src:'/order/',type:'ajax',opts:{margin:[0,0],closeClickOutside:false,closeBtn:false,closeTpl:'',afterLoad:function(e){initElements(box)}}});return false})};$(function(){});function productView(box){$('.product-tabs').tabs({historyMode:true});var viewedProducts=new Products().init();viewedProducts.add({id:$('[name="product_id"]',$('.type-box',box)).val()});var product=box,pic=$('.images .pic',product),img=$('img',pic),thumbs=$('.thumb',product);thumbs.on('click',function(){var el=$(this),img=$('img',pic);el.addClass('active').siblings().removeClass('active');pic.data('size',el.data('size')).data('taste',el.data('taste')).removeClass('hide');img.attr('src',el.attr('href')).data('zoom-image',el.data('zoom'));return false});toCartForm(product,{priceUpdate:function(resp){$('.price span',product).text($.aptero.price(resp.price));$('.price-old span',product).text($.aptero.price(resp.price_old));if(parseInt(resp.stock)){$('.in-stock',product).css({display:'block'});$('.not-in-stock',product).css({display:'none'})}else{$('.in-stock',product).css({display:'none'});$('.not-in-stock',product).css({display:'block'})}},toCart:function(){$('.to-cart',product).addClass('in-cart').removeClass('to-cart').text('В корзине')},typeChange:function(size_id,taste_id){$('.in-cart',product).addClass('to-cart').removeClass('in-cart').text('В корзину');thumbs.each(function(){var thumb=$(this),th_size_id=thumb.data('size'),th_taste_id=thumb.data('taste');if((th_size_id&&th_size_id!=size_id)||(th_taste_id&&th_taste_id!=taste_id)){thumb.addClass('hide')}else{thumb.removeClass('hide')}});if((pic.data('taste')&&pic.data('taste')!=taste_id)||(pic.data('size')&&pic.data('size')!=size_id)){pic.addClass('hide')};if(pic.hasClass('hide')){$('.thumb:not(.hide)',product).eq(0).trigger('click')}}})};function toCartForm(box,options){if(!box.length){return};var typeBox=$('.type-box',box),sizeSelect=$('.js-size-select',typeBox),tasteSelect=$('.js-taste-select',typeBox),countSelect=$('.js-count',typeBox);function updatePrice(){var data=$.aptero.serializeArray(typeBox);$.ajax({url:'/catalog/get-price/',method:'post',data:data,success:options.priceUpdate})};sizeSelect.on('change',function(){$.ajax({url:'/catalog/get-product-stock/',method:'post',data:$.aptero.serializeArray(typeBox),success:function(resp){$('option',tasteSelect).each(function(){var el=$(this),id=el.attr('value');if(parseInt(resp[sizeSelect.val()].taste[id])){el.addClass('green').removeClass('red')}else{el.addClass('red').removeClass('green')}});if($('option[value="'+tasteSelect.val()+'"]',tasteSelect).hasClass('red')&&$('option.green',tasteSelect).length){tasteSelect.val($('option.green',tasteSelect).attr('value')).trigger('change')}else{options.typeChange(sizeSelect.val(),tasteSelect.val());updatePrice()}}})});tasteSelect.on('change',function(){options.typeChange(sizeSelect.val(),tasteSelect.val());updatePrice()});countSelect.on('change',function(){updatePrice()});$.ajax({url:'/catalog/get-product-stock/',method:'post',data:$.aptero.serializeArray(typeBox),success:function(resp){$('option',sizeSelect).each(function(){var el=$(this),id=el.attr('value');if(parseInt(resp[id].stock)){el.addClass('green').removeClass('red')}else{el.addClass('red').removeClass('green')}});if($('option[value="'+sizeSelect.val()+'"]',sizeSelect).hasClass('red')){if($('option.green',sizeSelect).length){sizeSelect.val($('option.green',sizeSelect).attr('value'))}};sizeSelect.trigger('change')}});$('.js-product-request',box).on('click',function(){$.fancybox.open({src:'/order/product-request/',type:'ajax',opts:{margin:[0,0],ajax:{settings:{data:$.aptero.serializeArray(typeBox)}}}})});$('.js-cart-add',box).on('click',function(){var btn=$(this);if(btn.hasClass('to-cart')){$.cart.add($.aptero.serializeArray(typeBox));options.toCart();return false}})};function cartView(){var box=$('.cart-list');if(!box.length){return};box.on('change','.js-cart-count',function(){var el=$(this),data=el.closest('.product').data();data.count=parseInt(el.val());if(data.count>0){$.cart.add(data,{count:'replace'})}});box.on('click','.js-cart-del',function(){var product=$(this).closest('.product');product.fadeOut(200);$.cart.del(product.data())})};function cartRender(){$.cart.on('render',function(){for(var i in $.cart.cart){var product=$.cart.cart[i],productEl=$('.product[data-product_id="'+product.product_id+'"][data-size_id="'+product.size_id+'"][data-taste_id="'+product.taste_id+'"]','.cart-list');$('.sum span',productEl).text($.aptero.price(product.price*product.count))};var navCart=$('.item.cart','#header'),orderForm=$('.order-form');if($.cart.count){$('.desc',navCart).html($.aptero.price($.cart.sum)+' <i class="fa fa-rub"></i>');$('.counter',navCart).text($.cart.count).fadeIn(200);$('.cart-price').text($.aptero.price($.cart.sum));if(orderForm.length){var deliveryPrice=0;switch($('[name="attrs-delivery"]',orderForm).val()){case'courier':deliveryPrice=$.cart.delivery.courier;$('.cart-delivery').html(deliveryPrice?$.aptero.price(deliveryPrice)+' <i class="fa fa-rub"></i>':'бесплатно');break;case'pickup':deliveryPrice=$.cart.delivery.pickup;$('.cart-delivery').html(deliveryPrice?$.aptero.price(deliveryPrice)+' <i class="fa fa-rub"></i>':'бесплатно');break;default:$('.cart-delivery').html('не выбрана');break};$('.cart-sum-price',orderForm).text($.aptero.price($.cart.sum+parseInt(deliveryPrice)));$('.cart-error').css({display:'none'});$('.order-btn').css({display:'block'})}}else{$('.desc',navCart).text('Пока пуста');$('.counter',navCart).fadeOut(200);$('.cart-list').html('<div class="empty">Ваша корзина пуста</div>')}})};function userModel(){$('.profile-tabs').tabs()};